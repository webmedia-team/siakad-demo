var c=Object.defineProperty;var m=(s,t,a)=>t in s?c(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var l=(s,t,a)=>(m(s,typeof t!="symbol"?t+"":t,a),a);import{A as u,a as p,C as h,c as e,g,S as b,p as f}from"./index.d57021e8.js";import{i as v}from"./datatable.4b22066f.js";import{B as P}from"./button.d257158a.js";import{m as N}from"./map-actions.609b7ae0.js";import"./jquery.4c77f39d.js";const w=(s,t)=>({url:u+"/lecture/administration/guardianships/"+t,table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,id:"code",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender:(a,i,n,r)=>`
                <div class="form-check">
                    <input class="form-check-input dt-checkbox" type="checkbox" value="${n.id}">
                </div>`},{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender:(a,i,n,r)=>r.row+r.settings._iDisplayStart+1},{title:"NIM",data:"nim",name:"nim"},{title:"Nama Mahasiswa",data:"name",name:"name"},{title:"Kelas",data:"class_group.name",name:"classGroup.name",defaultContent:"-"},{title:"IPS",data:"guardianship.grade_semester",defaultContent:"-",name:"guardianship.grade_semester"},{title:"IPK",data:"guardianship.grade",defaultContent:"-",name:"guardianship.grade"},{title:"SKS Semester",data:"guardianship.credit_semester",defaultContent:"-",name:"guardianship.credit_semester"},{title:"SKS Total",data:"guardianship.credit",defaultContent:"-",name:"guardianship.credit"},{title:"Status Perwalian",data:"guardianship",defaultContent:"Belum Perwalian",name:"guardianship",mRender(a){var i;return a!=null&&a[0]?(i=a==null?void 0:a[0])!=null&&i.is_acc?"<i class='bx bxs-check-circle text-success'></i> Perwalian Disetujui":"<i class='bx bxs-x-circle text-danger' ></i> Perwalian Ditolak":'<span class="text-danger">Belum Perwalian</span>'}},{title:"Tanggal Perwalian",data:"guardianship",defaultContent:"Belum Perwalian",name:"guardianship",mRender(a){return a!=null&&a[0]?a==null?void 0:a[0].date:'<span class="text-danger">-</span>'}},{title:"",data:"id",name:"id",mRender(a,i,n){let r="";return p().includes("delete-guardianships")&&(r+=`<button type="button" class="btn btn-outline-danger btn-sm mx-1" data-toggle="delete" data-id="${a}"><i class="bx bx-trash"></i></button>`),r}}],callback:()=>{$('button[data-toggle="delete"]').unbind().on("click",function(a){a.preventDefault(),s($(this).data("id"))})}}),d="lecture/administration/guardianships";class x extends h{render(){var t,a;return e("div",{className:"intro-y"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items center justify-content-between"},e("h4",{className:"mb-sm-0"},(t=this.meta.title)!=null?t:"Untitled Page"),e("div",{className:"page-title-right"},e("div",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-link",{link:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item"},"Perkuliahan"),e("li",{className:"breadcrumb-item"},"Administrasi"),e("li",{className:"breadcrumb-item active"},(a=this.meta.title)!=null?a:"Untitled Page")))))),e("div",{className:"card dt-filter-card"},e("div",{className:"card-body"},e("div",{className:"row"},e("div",{className:"col-md-4"},e("label",{htmlFor:""},"Periode Akademik"),e("select",{name:"academic_period_id",id:"employee-status-id",className:"form-control dt-filter-input js-choices"},e("option",{value:"active"},"Aktif Saat Ini"),this.academicPeriods.map(i=>e("option",{value:i.hashid},i.name)))),e("div",{className:"col-md-4"},e("label",{htmlFor:""},"Program Studi"),e("select",{name:"study_program_id",id:"study-program-id",className:"form-control dt-filter-input js-choices"},e("option",{value:"all"},"Semua Program Studi"),this.studyPrograms.map(i=>e("option",{value:i.id},i.education_level.code," - ",i.name)))),e("div",{className:"col-md-4"},e("label",{htmlFor:""},"Status Perwalian"),e("select",{name:"guardianship_status",id:"guardianship-status",className:"form-control dt-filter-input js-choices"},e("option",{value:"all"},"Semua Status Perwalian"),e("option",{value:"null"},"Belum Perwalian"),e("option",{value:"true"},"Disetujui"),e("option",{value:"false"},"Ditolak")))))),e("div",{className:"card"},e("div",{className:"card-header border-0"},e("div",{className:"text-sm-end text-center"},e("div",{className:"dt-actions d-inline"},e(P,{data:{redirect:!0,targetLink:`/apps/lecture/administration/guardianships/${this.$router.params.employeeId}/batch-insert`,filter:!0,refresh:!0,permission:"create-guardianships",title:"Tambah Mahasiswa"}})))),e("div",{className:"card-body"},e("div",{className:"table-responsive table-card mb-1"},e("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))))}async componentWillMount(){const t=g(d,{hideSuccessNotification:!0,hideLoadingBar:!0}),a=this.getData({model:["studyPrograms"]}),i=this.getAcademicPeriods("is_active=true"),[n,r,o]=await Promise.all([t,a,i]);this.studyPrograms=r.data.studyPrograms,this.academicPeriods=o.data.academicPeriods,this.employeeGuardianships=n.data.guardianships}deleteStudentFromGuardianship(t){const a=new FormData;a.append("students",t),b.fire({title:"Hapus Mahasiswa dari Perwalian Ini ?",icon:"question",text:"Data yang dihapus tidak dikembalikan!",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Ya, lanjutkan",cancelButtonText:"Batal",confirmButtonColor:"#d1403b"}).then(async i=>{i.isConfirmed&&(await f(`${d}/${this.$router.params.employeeId}/delete`,a,{},!1)).status==200&&this.table.ajax.reload()})}componentDidMount(){this.table=v("#dataTable",w(this.deleteStudentFromGuardianship,this.$router.params.employeeId))}}l(x,"defaultProps",{...N(["getData","getAcademicPeriods"]),academicPeriods:[],studyPrograms:[],employeeGuardianships:[],table:null});export{x as default};
