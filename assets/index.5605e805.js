var m=Object.defineProperty;var n=(i,t,s)=>t in i?m(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var d=(i,t,s)=>(n(i,typeof t!="symbol"?t+"":t,s),s);import{C as u,c as e,g as p,u as l,B as g}from"./index.d57021e8.js";import{m as h}from"./map-actions.609b7ae0.js";const[b,_]=l(""),[P,f]=l("");class y extends u{async componentWillMount(){const t={model:["studyPrograms","academicPeriods"]},{status:s,data:a}=await this.getData(t);s==200&&(this.academicPeriods=a.academicPeriods,this.studyPrograms=a.studyPrograms)}render(){var t,s;return e("div",{class:"intro-y"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{class:"mb-sm-0"},(t=this.meta.title)!=null?t:"Untitled Page"),e("div",{className:"page-title-right"},e("div",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-link",{link:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item"},"Laporan"),e("li",{className:"breadcrumb-item"},"Nilai"),e("li",{className:"breadcrumb-item active"},(s=this.meta.title)!=null?s:"Untitled Page")))))),e("div",{className:"card col-5",style:{marginLeft:440}},e("form",{onSubmit:this.handleSubmit},e("div",{className:"card-body "},e("div",{className:"mb-3"},e("label",{htmlFor:""},"Program Studi",e("span",{className:"text-danger"},"*")),e("select",{name:"study_program_id",id:"study_program_id",className:"from-control js-choices dt-filter-input",onChange:a=>{_(a.target.value),this.fechtCourse()},required:!0},e("option",{value:""},"Pilih"),e("option",{value:"all",selected:!0},"Semua Program Studi"),this.studyPrograms.map(a=>e("option",{value:a.id,selected:b==a.id},a.education_level.code," - ",a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Grup Kelas",e("span",{className:"text-danger"},"*")),e("select",{name:"class_group_id",id:"courseOption",className:"form-control js-choices dt-filter-input",required:!0},e("option",{value:""},"Pilih"),e("option",{value:"all"},"Semua Grup Kelas"),this.classGroup.map(a=>e("option",{value:a.hashid}," ",a.name," - ",a.code)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Periode Akademik",e("span",{className:"text-danger"},"*")),e("select",{name:"academic_period_id",id:"academic_period_id",className:"from-control js-choices dt-filter-input",required:!0,onChange:a=>{f(a.target.value)}},e("option",{value:""},"Pilih"),this.academicPeriods.map(a=>e("option",{value:a.id,selected:P==a.id},a.name))))),e("div",{className:"card-footer text-end"},e("button",{className:"btn btn-primary",type:"submit","data-form-loading":!0},"Cetak")))))}async fechtCourse(){let t=$('select[name="study_program_id"]').val();const s=this;if(t!="all"){const{data:a}=await p(`general/class-groups?study_program_id=${t}`,{hideSuccessNotification:!0});this.setState(()=>{s.classGroup=a.classGroups})}t=="all"&&this.setState(()=>{s.classGroup=[]})}handleSubmit(t){t.preventDefault();let s=$('select[name="study_program_id"]').val(),a=$('select[name="academic_period_id"]').val(),c=$('select[name="class_group_id"]').val();const o=`${g}/api/v1/report/student/student-gradepointaverage-rank/print?academic_period_id=${a}&study_program_id=${s}&class_group_id=${c}`,r=window.open(`${o}`,"_blank","resizable=yes,scrollbars=yes,status=yes");r&&(r.opener=null,r.location=`${o}`,r.addEventListener("beforeunload",function(){r.location=`${o}`}))}}d(y,"defaultProps",{...h(["getAcademicPeriods","getData","getClassGroups"]),table:null,classGroup:[],studyPrograms:[],academicPeriods:[]});export{y as default};
