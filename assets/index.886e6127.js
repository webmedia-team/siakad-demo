var c=Object.defineProperty;var u=(s,t,e)=>t in s?c(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var r=(s,t,e)=>(u(s,typeof t!="symbol"?t+"":t,e),e);import{A as b,B as h,C as o,c as a,p,u as n}from"./index.d57021e8.js";import{i as v}from"./datatable.4b22066f.js";import{B as f}from"./button.d257158a.js";import{m as g}from"./map-actions.609b7ae0.js";/* empty css                 */import"./jquery.4c77f39d.js";const N=(s,t)=>({url:b+"/lecture/administration/her-registration",table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,id:"code",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender:(e,i,l,d)=>`
                <div class="form-check">
                    <input class="form-check-input dt-checkbox" type="checkbox" value="${l.id}">
                </div>`},{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender:(e,i,l,d)=>d.row+d.settings._iDisplayStart+1},{title:"Periode Akademik",data:"academic_period.name",name:"academicPeriod.name"},{title:"NIM",data:"student.nim",name:"student.nim"},{title:"Nama Mahasiswa",data:"student.name",name:"student.name"},{title:"Biaya UKT",data:"tuition_fee",name:"tuition_fee",mRender(e){return`Rp. ${Intl.NumberFormat("id").format(e)}`}},{title:"Tanggal Pembayaran",data:"payment_date",name:"payment_date"},{title:"Bukti Pembayaran",data:"attachment",name:"attachment",defaultContent:"-",mRender(e,i,l){return e?`<a href="${h}/storage/images/lecture/administration/her-registrations/${e}" target="_blank">Lihat Bukti Pembayaran</a>`:null}},{title:"Valid",data:"is_acc",name:"is_acc",mRender(e,i,l){return e?"<i class='bx bxs-check-circle text-success'></i>":l.validator_id?"<i class='bx bxs-x-circle text-danger' ></i>":`<button class="btn btn-primary btn-sm verify-btn" data-id="${l.id}" type="button"><i class='bx bxs-check-circle'></i> Validasi</button>`}}],callback:()=>{$(".verify-btn").unbind().on("click",function(e){e.preventDefault(),console.log($(this).data("id")),s($(this).data("id"))}),$('button[data-toggle="detail"]').unbind().on("click",function(e){e.preventDefault(),t($(this).data("id"))})}});class m extends o{render(){return a("div",{className:"modal fade",id:"her-registration-validation-modal",role:"dialog"},a("div",{className:"modal-dialog",role:"document"},a("div",{className:"modal-content"},a("form",{onsubmit:this.props.onsubmit},a("div",{className:"modal-header bg-light pb-2"},a("h5",{className:"modal-title"},this.props.title)),a("div",{className:"modal-body"},a("input",{type:"hidden",id:"her-registration-id",name:"heregistration_id",value:""}),a("div",{className:"mb-3"},a("label",{htmlFor:"is-valid",className:"from-label"},"Apakah Data Sudah Valid ?  ",a("span",{className:"text-danger"},"*")),a("select",{name:"is_acc",id:"is-valid",className:"form-control js-choices"},a("option",{value:"true"},"Valid"),a("option",{value:"false"},"Tidak Valid")))),a("div",{className:"modal-footer"},a("button",{type:"button",className:"btn btn-light","data-bs-dismiss":"modal"},"Batal"),a("button",{type:"submit",className:"btn btn-primary","data-form-loading":!0},a("i",{className:"bx bx-save"})," Simpan"))))))}}r(m,"defaultProps",{onsubmit:null,title:"Untitled Modal",academicPeriods:[],studyProgramId:""});const[y,V]=n("Validasi Daftar Ulang");n("");const P="lecture/administration/her-registration";class x extends o{render(){var t,e;return a("div",{className:"intro-y"},a("div",{className:"row"},a("div",{className:"col-12"},a("div",{className:"page-title-box d-sm-flex align-items center justify-content-between"},a("h4",{className:"mb-sm-0"},(t=this.meta.title)!=null?t:"Untitled Page"),a("div",{className:"page-title-right"},a("div",{className:"breadcrumb"},a("li",{className:"breadcrumb-item"},a("router-link",{link:"apps.dashboard"},"Dashboard")),a("li",{className:"breadcrumb-item"},"Perkuliahan"),a("li",{className:"breadcrumb-item"},"Administrasi"),a("li",{className:"breadcrumb-item active"},(e=this.meta.title)!=null?e:"Untitled Page")))))),a("div",{className:"card dt-filter-card"},a("div",{className:"card-body"},a("div",{className:"row"},a("div",{className:"col-md-4"},a("label",{htmlFor:""},"Program Studi"),a("select",{name:"study_program_id",id:"employee-status-id",className:"form-control dt-filter-input js-choices"},a("option",{value:"all"},"Semua Program Studi"),this.studyPrograms.map(i=>a("option",{value:i.id},i.education_level.code," - ",i.name)))),a("div",{className:"col-md-4"},a("label",{htmlFor:""},"Tahun Periode"),a("select",{name:"academic_period_id",id:"employee-status-id",className:"form-control dt-filter-input js-choices"},a("option",{value:"all"},"Semua Periode"),this.academicPeriods.map(i=>a("option",{value:i.hashid},i.name)))),a("div",{className:"col-md-4"},a("label",{htmlFor:""},"Status"),a("select",{name:"is_acc",id:"employee-status-id",className:"form-control dt-filter-input js-choices"},a("option",{value:"all"},"Semua Status"),a("option",{value:"true"},"Valid"),a("option",{value:"false"},"Tidak Valid")))))),a("div",{className:"card"},a("div",{className:"card-header border-0"},a("div",{className:"text-sm-end text-center"},a("div",{className:"dt-actions d-inline"}),a(f,{data:{refresh:!0,filter:!0,create:!1}}))),a("div",{className:"card-body"},a("div",{className:"table-responsive table-card mb-1"},a("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))),a(m,{onsubmit:this.submitData,title:y}))}async componentWillMount(){const{data:t}=await this.getData({model:["studyPrograms"]}),e=await this.getAcademicPeriods("is_active=true");this.studyPrograms=t.studyPrograms,this.academicPeriods=e.data.academicPeriods}showValidationModal(t){$("#her-registration-id").val(t),$("#her-registration-validation-modal").modal("show")}componentDidMount(){this.table=v("#dataTable",N(this.showValidationModal,this.showDetail))}async submitData(t){t.preventDefault(),(await p(`${P}/${$("#her-registration-id").val()}/validate`,t.target)).status==200&&this.table.ajax.reload()}}r(x,"defaultProps",{...g(["getData","getAcademicPeriods"]),studyPrograms:[],academicPeriods:[],table:null});export{x as default};
