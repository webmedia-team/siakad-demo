var _=Object.defineProperty;var x=(l,s,a)=>s in l?_(l,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[s]=a;var f=(l,s,a)=>(x(l,typeof s!="symbol"?s+"":s,a),a);import{C as w,c as e,i as C,g as S,p as P}from"./index.d57021e8.js";import"./datatable.4b22066f.js";import{H as I}from"./header-component.8d40ee12.js";import{m as k}from"./map-actions.609b7ae0.js";const v="lecture/college-class";class A extends w{render(){var s,a;return e("div",{className:"intro-y"},e(I,{id:this.$router.params.id}),e("div",{className:"card"},e("div",{className:"card-body"},e("div",{className:"row"},e("div",{className:"col-12"},e("label",{htmlFor:"class_schedule"},"Pertemuan Ke"),e("select",{name:"class_schedule",id:"class_schedule",className:"form-control js-choices",onChange:({target:t})=>this.getPresences(t)},e("option",{value:""},"Pilih"),(s=this.classSchedules)==null?void 0:s.map(t=>e("option",{value:t.id},t.meeting_number))))))),e("div",{className:"card shadow-sm mb-3"},e("form",{onSubmit:this.submit},e("div",{className:"card-header border-0"},e("div",{className:"row"},e("div",{className:"col-sm-6 d-flex align-items-center v-100"},e("h5",null,this.meta.title)),e("div",{className:"col-sm-6 text-sm-end text-center"},C("update-class-attendances")&&this.collegeClass.feeder_id==null?e("button",{type:"submit",className:"btn btn-primary","data-form-loading":!0},e("i",{className:"bx bx-save"})," Simpan"):""))),e("div",{className:"card-body"},e("table",{className:"table align-left mb-0"},e("thead",{className:"table-light"},e("tr",null,e("th",null,"No."),e("th",null,"Nama"),e("th",null,"Pertemuan Ke"),e("th",null,"Status"))),e("tbody",{className:"presence-render"},e("input",{type:"hidden",name:"class_schedule",value:this.classScheduleId}),this.presences.length>0?(a=this.presences)==null?void 0:a.map((t,y)=>{var c,n,i,d,r,u,o,m,h,p,g,b,N;return e("tr",null,e("td",null,y+1),e("td",null,e("input",{type:"hidden",name:"student[]",value:t.student_id}),(c=t.student)==null?void 0:c.nim," - ",(n=t.student)==null?void 0:n.name),e("td",null,(r=(d=(i=t.student)==null?void 0:i.presence[0])==null?void 0:d.number_of_meeting)!=null?r:this.numberOfMeeting),e("td",{width:400},e("select",{name:"status[]",id:"",className:"form-control js-choices"},e("option",{value:"H",selected:((o=(u=t.student)==null?void 0:u.presence[0])==null?void 0:o.status)=="H"||((h=(m=t.student)==null?void 0:m.presence[0])==null?void 0:h.status)=="0"||((p=t.student)==null?void 0:p.presence.length)<=0},"Hadir"),e("option",{value:"S",selected:((g=t.student.presence[0])==null?void 0:g.status)=="S"},"Sakit"),e("option",{value:"I",selected:((b=t.student.presence[0])==null?void 0:b.status)=="I"},"Izin"),e("option",{value:"A",selected:((N=t.student.presence[0])==null?void 0:N.status)=="A"},"Alfa"))))}):e("tr",null,e("td",{colspan:"12"},e("div",{class:"text-center"},e("lord-icon",{src:"https://cdn.lordicon.com/bbnkwdur.json",trigger:"loop",colors:"primary:#405189,secondary:#0ab39c",style:"width:75px;height:75px"}),e("h5",{class:"mt-2"},"Opps! Tidak Ada Data"),e("p",{class:"text-muted"},"Data kamu masih kosong."))))))))))}async componentWillMount(){const{data:s}=await this.getClassSchedules(`college_class_id=${this.$router.params.id}`);this.classSchedules=s.classSchedules;const a=await S(`lecture/college-class/schedule/${this.$router.params.id}`,{hideSuccessNotification:!0});this.collegeClass=a.data.collegeClass}async getPresences(s){const{data:a}=await S(`${v}/${this.$router.params.id}/class-attendances?class_schedule=${s.value}`,{hideSuccessNotification:!0});this.setState(()=>{this.presences=a.classParticipants,this.classScheduleId=a.classSchedule,this.numberOfMeeting=$('*[name="class_schedule"]').find(":selected").text()})}async submit(s){s.preventDefault(),await P(`${v}/${this.$router.params.id}/class-attendances/presence`,s.target)}}f(A,"defaultProps",{...k(["getClassSchedules"]),classSchedules:[],presences:[],classScheduleId:"",collegeClass:null,numberOfMeeting:null});export{A as default};
