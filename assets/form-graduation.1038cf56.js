var c=Object.defineProperty;var m=(d,t,r)=>t in d?c(d,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[t]=r;var o=(d,t,r)=>(m(d,typeof t!="symbol"?t+"":t,r),r);import{A as u,C as p,c as a,p as b,u as l}from"./index.d57021e8.js";import{i as g}from"./datatable.4b22066f.js";import{m as h}from"./map-actions.609b7ae0.js";const f=(d,t,r)=>({url:`${u}/lecture/graduations/list-students`,table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,checkboxes:!0,id:"code",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender:(e,s,i,n)=>`
          <div class="form-check">
              <input class="form-check-input dt-checkbox" type="checkbox" value="${i.id}">
          </div>`},{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender:(e,s,i,n)=>n.row+n.settings._iDisplayStart+1},{title:"NIM",data:"nim",name:"nim"},{title:"Nama",data:"name",name:"name"},{title:"Program Studi",data:"study_program.name",name:"studyProgram.name",mRender(e,s,i){return`${i.study_program.education_level.code} - ${e}`}},{title:"Jenis Kelamin",data:"gender",name:"gender",mRender:function(e){return e=="L"?"Laki-Laki":"Perempuan"}},{title:"Tanggal Lulus",data:"id",name:"id",mRender:e=>`<input name="graduation_date" type="date" data-graduation-id="${e}" class="form-control flatpickr-date graduation-date-input" placeholder="Input tanggal lulus" value="${new Date().toISOString().split("T")[0]}"></input>`},{title:"Keterangan",data:"id",name:"id",mRender:e=>`<input name="description" type="text" data-graduation-id="${e}" class="form-control description-input" placeholder="Input keterangan"></input>`},{title:"Nomor Ijazah",data:"id",name:"id",mRender:e=>`<input name="certificate_number" type="text" data-graduation-id="${e}" class="form-control certificate-number-input" placeholder="Nomor Ijazah"></input>`}],callback:()=>{$(".flatpickr-date").length&&$.each($(".flatpickr-date"),(e,s)=>{var i;$(s).flatpickr($(s).data("time-hrs")?{enableTime:!0,noCalendar:!0,time_24hr:!0,dateFormat:"H:i",defaultDate:$(s).val()}:{dateFormat:(i=$(s).data("format"))!=null?i:"Y-m-d",defaultDate:$(s).val()==""?"today":$(s).val()})}),$('button[data-toggle="delete"]').unbind().on("click",function(e){e.preventDefault(),t($(this).data("id"))}),$(".set-coordinaotr").unbind().on("click",function(e){e.preventDefault(),r($(this).data("id"))})},options:{order:[2,"asc"]}}),v="lecture/graduations";l("");l("");l("");class y extends p{render(){var t,r,e,s;return a("div",{className:"intro-y"},a("div",{className:"row"},a("div",{className:"col-12"},a("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},a("h4",{className:"mb-sm-0 title"},(r=(t=this.meta)==null?void 0:t.title)!=null?r:"Untitled Page"),a("div",{className:"page-title-right"},a("ol",{className:"breadcrumb"},a("li",{className:"breadcrumb-item"},a("router-name",{name:"apps.dashboard"},"Dashboard")),a("li",{className:"breadcrumb-item"},"Perkuliahan"),a("li",{className:"breadcrumb-item"},a("router-name",{name:"apps.lecture.graduations"},"Kelulusan")),a("li",{className:"breadcrumb-item active title"},(s=(e=this.meta)==null?void 0:e.title)!=null?s:"Untitled Page")))))),a("div",{className:"text-center mb-3"},a("div",{class:"btn-group",role:"group","aria-label":"Basic example"},a("router-name",{name:"apps.lecture.graduations.create-graduation",class:"btn btn-primary"},"Kelulusan"),a("router-name",{name:"apps.lecture.graduations.create-non-graduation",class:"btn btn-primary"},"Drop Out / Lainnya"))),a("div",{className:"row mt-4"},a("div",{className:"col"},this.errors.length?a("div",{class:"alert alert-danger",role:"alert"},a("ul",null,this.errors.map(i=>a("li",null,"Mahasiswa ",i.student.name," ",i.message)))):"",a("div",{className:"card"},a("div",{className:"card-body"},a("div",{className:"row"},a("div",{className:"col-5"},a("label",{htmlFor:""},"Program Studi"),a("select",{name:"study_program_id",id:"study-program-id",className:"from-control js-choices dt-filter-input"},a("option",{value:""},"Pilih Prodi"),this.studyPrograms.map(i=>a("option",{value:i.id},i.education_level.code," - ",i.name)))),a("div",{className:"col-5"},a("label",{htmlFor:""},"Angkatan"),a("select",{name:"academic_year_id",id:"academic-year-id",className:"from-control js-choices dt-filter-input"},a("option",{value:""},"Pilih Angkatan"),this.academicYears.map(i=>a("option",{value:i.id},i.name)))),a("div",{className:"col-2 text-end pt-3"},a("button",{className:"btn btn-primary",onClick:()=>{this.saveData()}},"Simpan"))))),a("div",{className:"card intro-y"},a("div",{className:"card-header border-0"},a("div",{className:"row"},a("div",{className:"col-sm-12 text-sm-end text-center"}))),a("div",{className:"card-body"},a("div",{className:"table-responsive table-card mb-1"},a("form",{action:"",id:"student-list-table"},a("table",{id:"dataTable",className:"table zero-configuration",width:"100%"}))))))))}async componentWillMount(){const t=await this.getData({model:["studyPrograms","academicYears"]});this.studyPrograms=t.data.studyPrograms,this.academicYears=t.data.academicYears}async saveData(){const t=new FormData;for(const e of window.checkedDataIds)t.append("students[]",e),t.append("graduation_date[]",$(`.graduation-date-input[data-graduation-id=${e}]`).val()),t.append("description[]",$(`.description-input[data-graduation-id=${e}]`).val()||" "),t.append("certificate_number[]",$(".certificate-number-input").val());const r=await b(`${v}?form_type=graduation`,t,{},!1);r.status==200&&!r.data.status&&(r.data.status?this.$router.pushState("/apps/lecture/graduation"):this.setState(()=>{this.errors=r.data.data}))}componentDidMount(){this.table=g("#dataTable",f(this.$router.params.id))}}o(y,"defaultProps",{roles:[],table:null,...h(["getData"]),isDisabled:!1,studyPrograms:[],academicYears:[],errors:[]});export{y as default};
