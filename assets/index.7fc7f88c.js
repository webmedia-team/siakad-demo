var u=Object.defineProperty;var p=(i,t,s)=>t in i?u(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var o=(i,t,s)=>(p(i,typeof t!="symbol"?t+"":t,s),s);import{C as h,c as a,g as n,u as c,B as g}from"./index.d57021e8.js";import{m as _}from"./map-actions.609b7ae0.js";const[b,y]=c(""),[f,N]=c("");c("");const[v,P]=c("");class G extends h{async componentWillMount(){const t={model:["studyPrograms","academicYears"]},{status:s,data:e}=await this.getData(t);s==200&&(this.academicYear=e.academicYears,this.studyPrograms=e.studyPrograms)}render(){var t,s;return a("div",{class:"intro-y"},a("div",{className:"row"},a("div",{className:"col-12"},a("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},a("h4",{class:"mb-sm-0"},(t=this.meta.title)!=null?t:"Untitled Page"),a("div",{className:"page-title-right"},a("div",{className:"breadcrumb"},a("li",{className:"breadcrumb-item"},a("router-link",{link:"apps.dashboard"},"Dashboard")),a("li",{className:"breadcrumb-item"},"Laporan"),a("li",{className:"breadcrumb-item"},"Nilai"),a("li",{className:"breadcrumb-item active"},(s=this.meta.title)!=null?s:"Untitled Page")))))),a("div",{className:"card col-5",style:{marginLeft:440}},a("form",{onSubmit:this.handleSubmit},a("div",{className:"card-body "},a("div",{className:"mb-3"},a("label",{htmlFor:""},"Program Studi",a("span",{className:"text-danger"},"*")),a("select",{name:"study_program_id",id:"study_program_id",className:"from-control js-choices dt-filter-input",onChange:e=>{y(e.target.value),this.fechtClassGroup()},required:!0},a("option",{value:""},"Pilih"),this.studyPrograms.map(e=>a("option",{value:e.id,selected:b==e.id},e.education_level.code," - ",e.name)))),a("div",{className:"mb-3"},a("label",{htmlFor:""},"Angakatan",a("span",{className:"text-danger"},"*")),a("select",{name:"acadmic_year_id",id:"acadmic_year_id",className:"from-control js-choices dt-filter-input",required:!0,onChange:e=>{N(e.target.value),this.fechtClassGroup()}},a("option",{value:""},"Pilih"),this.academicYear.map(e=>a("option",{value:e.id,selected:f==e.id},e.name)))),a("div",{className:"mb-3"},a("label",{htmlFor:""},"Grup Kelas",a("span",{className:"text-danger"},"*")),a("select",{name:"class_group_id",id:"class_group_id",className:"form-control js-choices dt-filter-input",required:!0,onChange:e=>{P(e.target.value),this.fechtStudent()}},a("option",{value:""},"Pilih"),this.classGroup.map(e=>a("option",{value:e.hashid,selected:v==e.hashid}," ",e.name," - ",e.code)))),a("div",{className:"mb-3"},a("label",{htmlFor:""},"Mahasiswa",a("span",{className:"text-danger"})),a("select",{name:"student_id",id:"student_id",className:"form-control js-choices dt-filter-input"},a("option",{value:""},"Pilih"),this.student.map(e=>a("option",{value:e.id}," ",e.name))))),a("div",{className:"card-footer text-end"},a("button",{className:"btn btn-primary",type:"submit","data-form-loading":!0},"Cetak")))))}async fechtClassGroup(){let t=$('select[name="study_program_id"]').val(),s=$('select[name="acadmic_year_id"]').val();const e=this,{data:d}=await n(`general/class-groups?study_program_id=${t}&academic_year_id=${s}`,{hideSuccessNotification:!0});this.setState(()=>{e.classGroup=d.classGroups})}async fechtStudent(){let t=$('select[name="class_group_id"]').val();const{data:s}=await n(`general/students?class_group_id=${t}`,{hideSuccessNotification:!0}),e=this;this.setState(()=>{e.student=s.students})}handleSubmit(t){t.preventDefault();let s=$('select[name="study_program_id"]').val(),e=$('select[name="acadmic_year_id"]').val(),d=$('select[name="class_group_id"]').val(),m=$('select[name="student_id"]').val();const l=`${g}/api/v1/report/student-transcript/print?academic_year_id=${e}&study_program_id=${s}&class_group_id=${d}&student_id=${m}`,r=window.open(`${l}`,"_blank","resizable=yes,scrollbars=yes,status=yes");r&&(r.opener=null,r.location=`${l}`,r.addEventListener("beforeunload",function(){r.location=`${l}`}))}}o(G,"defaultProps",{..._(["getData","getClassGroups"]),table:null,classGroup:[],studyPrograms:[],academicYear:[],student:[]});export{G as default};
