var d=Object.defineProperty;var l=(c,t,i)=>t in c?d(c,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[t]=i;var n=(c,t,i)=>(l(c,typeof t!="symbol"?t+"":t,i),i);import{C as m,c as e,p as o,g as _,u}from"./index.d57021e8.js";import{t as h}from"./academic-year.d8815b44.js";import{i as g}from"./datatable.4b22066f.js";import{m as p}from"./map-actions.609b7ae0.js";const r="setting/study-programs",[b,y]=u("");class k extends m{async componentWillMount(){const t=await this.getData({model:["academicPeriods","getMajors"]});this.majors=t.data.getMajors.original.majors,await this.fetchStudyProgramsData()}render(){var t,i;return e("div",{className:"intro-y"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items center justify-content-between"},e("h4",{className:"mb-sm-0"},(t=this.meta.title)!=null?t:"Untitled Page"),e("div",{className:"page-title-right"},e("div",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-link",{link:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item"},"Pengaturan"),e("li",{className:"breadcrumb-item active"},(i=this.meta.title)!=null?i:"Untitled Page")))))),e("div",{className:"card"},e("div",{className:"card-header border-0"},e("div",{className:"text-sm-end text-center"},e("div",{className:"row text-start"},e("div",{className:"col-md-6"},e("div",{className:"form-group"},e("label",{htmlFor:""},"Jurusan"),e("select",{name:"",id:"",className:"form-control js-choices",onChange:a=>{y(a.target.value),this.filterMajor(a.target.value)}},e("option",{value:""},"Semua Jurusan"),this.majors.map(a=>e("option",{value:a.id,selected:b==a.id},a.name)))))),e("div",{className:"dt-actions d-inline"}))),e("div",{className:"card-body"},e("div",{className:"table-responsive table-card mb-1 px-3"},e("table",{className:"table table-nowrap table-bordered"},e("thead",{className:"bg-light text-center"},e("tr",null,e("th",null,"Program Studi"),e("th",null,"Perwalian"),e("th",null,"KHS"),e("th",null,"KRS"),e("th",null,"Penilaian"),e("th",null,"Remidi"),e("th",null,"Update Biodata"),e("th",null,"Dosen Generate Pertemuan"),e("th",null,"Aksi"))),e("tbody",null,this.studyPrograms.map(a=>e("tr",null,e("td",null,a.name),e("td",{className:"text-center"},e("input",{className:"form-check-input",type:"checkbox",id:"academic-holiday",name:"is_academic_holiday",value:"true",onChange:s=>{this.changeSetting("is_guardianship",s,a.id)},checked:a.study_program_setting_map.is_guardianship})),e("td",{className:"text-center"},e("input",{className:"form-check-input",type:"checkbox",id:"academic-holiday",name:"is_academic_holiday",value:"true",onChange:s=>{this.changeSetting("is_khs",s,a.id)},checked:a.study_program_setting_map.is_khs})),e("td",{className:"text-center"},e("input",{className:"form-check-input",type:"checkbox",id:"academic-holiday",name:"is_academic_holiday",value:"true",onChange:s=>{this.changeSetting("is_krs",s,a.id)},checked:a.study_program_setting_map.is_krs})),e("td",{className:"text-center"},e("input",{className:"form-check-input",type:"checkbox",id:"academic-holiday",name:"is_academic_holiday",value:"true",onChange:s=>{this.changeSetting("is_score",s,a.id)},checked:a.study_program_setting_map.is_score})),e("td",{className:"text-center"},e("input",{className:"form-check-input",type:"checkbox",id:"academic-holiday",name:"is_academic_holiday",value:"true",onChange:s=>{this.changeSetting("is_remedial_score",s,a.id)},checked:a.study_program_setting_map.is_remedial_score})),e("td",{className:"text-center"},e("input",{className:"form-check-input",type:"checkbox",id:"academic-holiday",name:"is_academic_holiday",value:"true",onChange:s=>{this.changeSetting("is_update_biodata",s,a.id)},checked:a.study_program_setting_map.is_update_biodata})),e("td",{className:"text-center"},e("input",{className:"form-check-input",type:"checkbox",id:"academic-holiday",name:"is_academic_holiday",value:"true",onChange:s=>{this.changeSetting("is_lecture_generate",s,a.id)},checked:a.study_program_setting_map.is_lecture_generate})),e("td",null,e("router-link",{link:`/apps/setting/study-programs/${a.id}`},e("button",{type:"button",class:"btn btn-outline-primary btn-sm mx-auto","data-toggle":"detail","data-id":"${data}"},e("i",{class:"bx bx-menu"}))))))))))))}componentDidMount(){this.table=g("#dataTable",h(this.editData,this.deleteData))}async changeSetting(t,i,a){const s=new FormData;s.set("key",t),s.set("value",$(i.target).is(":checked")),s.set("studyProgramId",a),await o(r,s,{hideLoadingBar:!0},!1)}async filterMajor(t){await this.fetchStudyProgramsData(t),this.setState(()=>{})}async getDetail(){}async fetchStudyProgramsData(t){const i=await _(`${r}${t?`?major_id=${t}`:""}`,{hideSuccessNotification:!0});this.studyPrograms=i.data.study_programs.map(a=>(a.study_program_setting[0]?a.study_program_setting_map={is_guardianship:a.study_program_setting[0].is_guardianship,is_khs:a.study_program_setting[0].is_khs,is_krs:a.study_program_setting[0].is_krs,is_lecture_generate:a.study_program_setting[0].is_lecture_generate,is_questionnaire:a.study_program_setting[0].is_questionnaire,is_remedial_score:a.study_program_setting[0].is_remedial_score,is_score:a.study_program_setting[0].is_score,is_update_biodata:a.study_program_setting[0].is_update_biodata}:a.study_program_setting_map={is_guardianship:!1,is_khs:!1,is_krs:!1,is_lecture_generate:!1,is_questionnaire:!1,is_remedial_score:!1,is_score:!1,is_update_biodata:!1},a))}}n(k,"defaultProps",{...p(["getData"]),table:null,studyPrograms:[],majors:[],academicPeriods:[]});export{k as default};
