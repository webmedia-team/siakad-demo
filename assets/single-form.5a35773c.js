var P=Object.defineProperty;var T=(l,s,a)=>s in l?P(l,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[s]=a;var m=(l,s,a)=>(T(l,typeof s!="symbol"?s+"":s,a),a);import{C as x,c as e,g as M,p as d,u as t}from"./index.d57021e8.js";/* empty css                 */import{H as F}from"./header-component.8d40ee12.js";import{m as j}from"./map-actions.609b7ae0.js";const[w,u]=t(""),[L,h]=t(""),[D,p]=t(""),[R,g]=t(""),[z,f]=t(""),[C,b]=t(""),[r,G]=t(""),[I,N]=t(""),[o,v]=t(""),[K,y]=t(""),[q,S]=t(""),[J,_]=t(""),[W,k]=t("");class E extends x{constructor(){super(...arguments);m(this,"base_url","lecture/college-class/"+this.$router.params.id)}render(){return e("div",{className:"intro-y"},e(F,{id:this.$router.params.id}),e("div",{className:"card shadow-sm mb-3"},e("form",{action:"",method:"POST",onSubmit:this.submit},e("div",{className:"card-header"},e("h5",{className:"card-title"},this.meta.title)),e("div",{className:"card-body"},e("div",{className:"row"},e("div",{className:"col-sm-6"},e("div",{className:"form-group mb-3"},e("label",{htmlFor:"meeting-number"},"Pertemuan Ke ",e("span",{className:"text-danger"},"*")),e("input",{name:"meeting_number",type:"number",className:"form-control",id:"meeting-number",placeholder:"Pertemuan ke-",value:w})),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"employee-id"},"Dosen Pengajar ",e("span",{className:"text-danger"},"*")," "),e("select",{name:"employee_id",id:"employee-id",className:"form-control js-choices"},e("option",{value:""},"Pilih Dosen Pengajar"),this.teachingLecturers.map(a=>e("option",{selected:a.employee.id==L,value:a.employee.id},`${a.employee.front_title?`${a.employee.front_title}.`:""}${a.employee.name}${a.employee.back_title?`, ${a.employee.back_title}`:""}`)))),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"date"},"Tanggal Jadwal ",e("span",{className:"text-danger"},"*")),e("input",{name:"date",type:"date",className:"form-control flatpickr-date",id:"date",placeholder:"Tanggal Jadwal",value:R})),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"time-start"},"Waktu Mulai ",e("span",{className:"text-danger"},"*")),e("select",{name:"time_start",id:"time-start",className:"form-control js-choices"},e("option",{value:""},"Pilih Waktu Mulai"),this.timeSlots.map(a=>e("option",{value:a.time,selected:a.time==z},a.time)))),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"time-end"},"Waktu Selesai ",e("span",{className:"text-danger"},"*")),e("select",{name:"time_end",id:"time-end",className:"form-control js-choices"},e("option",{value:""},"Pilih Waktu Selesai"),this.timeSlots.map(a=>e("option",{value:a.time,selected:a.time==C},a.time)))),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"meeting-type-id"},"Jenis Pertemuan ",e("span",{className:"text-danger"},"*")),e("select",{name:"meeting_type_id",id:"meeting-type-id",className:"form-control js-choices",value:D},e("option",{value:""},"Pilih Jenis Pertemuan"),this.meetingTypes.map(a=>e("option",{value:a.hashid},a.name)))),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"learning-method"},"Metode Pembelajaran ",e("span",{className:"text-danger"},"*")),e("select",{name:"learning_method",id:"learning-method",className:"form-control js-choices"},e("option",{value:"online",selected:r=="online"},"Online"),e("option",{value:"offline",selected:r=="offline"},"Offline"),e("option",{value:"hybrid",selected:r=="hybrid"},"Hybrid"))),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"room-id"},"Ruang Kuliah"),e("select",{name:"room_id",id:"room-id",className:"form-control js-choices"},e("option",{value:""},"Pilih Ruang Kuliah"),this.rooms.map(a=>e("option",{selected:a.hashid==I,value:a.hashid},a.name," ",a.location?` - ${a.location}`:""))))),e("div",{className:"col-sm-6"},e("div",{className:"form-group mb-3"},e("label",{htmlFor:"status"},"Status ",e("span",{className:"text-danger"},"*")),e("select",{name:"status",id:"status",className:"form-control js-choices",onChange:this.toggleRequiredMark},e("option",{value:""},"Pilih Status"),e("option",{value:"schedule",selected:o=="schedule"},"Terjadwalkan"),e("option",{value:"start",selected:o=="start"},"Dimulai"),e("option",{value:"done",selected:o=="done"},"Selesai"),e("option",{value:"reschedule",selected:o=="reschedule"},"Dijadwalkan Ulang"))),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"credit"},"SKS ",e("span",{className:"text-danger"},"*")),e("input",{name:"credit",type:"number",className:"form-control",id:"credit",placeholder:"SKS",value:K})),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"location"},"Lokasi"),e("input",{name:"location",type:"text",className:"form-control",id:"location",placeholder:"Lokasi",value:q})),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"attachment"},"Lampiran Materi"),e("input",{type:"file",name:"attachment-file",id:"attachment",className:"filepond form-control"})),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"presence-document"},"Dokumen Presensi"),e("input",{type:"file",name:"presence_document-file",id:"presence-document",className:"filepond form-control"})),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"journal-document"},"Dokumen Jurnal"),e("input",{type:"file",name:"journal_document-file",id:"journal-document",className:"filepond form-control"})))),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"material-plan"},"Rencana Materi"),e("textarea",{className:"form-control",name:"material_plan",id:"material-plan",cols:"30",rows:"5"},J)),e("div",{className:"form-group mb-3"},e("label",{htmlFor:"material-realization"},"Realisasi Materi ",e("span",{className:"text-danger material-realization-required-mark d-none"},"*")),e("textarea",{className:"form-control",name:"material_realization",id:"material-realization",cols:"30",rows:"5"},W))),e("div",{className:"card-footer text-end mb-3"},e("router-link",{link:`/apps/lecture/college-class/schedule/${this.$router.params.id}/class-schedule`,className:"btn btn-dark mx-1"},"Kembali"),e("button",{type:"submit",className:"btn btn-primary"},e("i",{class:"las la-save me-2"})," Simpan")))))}async componentWillMount(){this.id=this.$router.params.classScheduleId,this.id?await this.fetchClassScheduleData():(u(""),h(""),g(""),f(""),b(""),p(""),N(""),v(""),y(""),S(""),_(""),k("")),await this.fetchTeachingLecturer()}async fetchTeachingLecturer(){var i,n,c;const{data:a}=await this.getData({model:["teachingLecturers","getMeetingTypes","getRooms","getTimeSlots"],where:[{college_class_id:this.$router.params.id}]});this.meetingTypes=(n=(i=a==null?void 0:a.getMeetingTypes)==null?void 0:i.original)==null?void 0:n.meetingTypes,this.teachingLecturers=a.teachingLecturers,this.rooms=a.getRooms.original.rooms,this.timeSlots=(c=a==null?void 0:a.getTimeSlots)==null?void 0:c.original.timeSlots}async fetchClassScheduleData(){const a=await M(`${this.base_url}/class-schedules/${this.id}`,{hideSuccessNotification:!0,hideLoadingBar:!0});a.status==200&&(u(a.data.classSchedule.meeting_number),h(a.data.classSchedule.employee_id),g(a.data.classSchedule.date),f(a.data.classSchedule.time_start),b(a.data.classSchedule.time_end),p(a.data.classSchedule.hashed_meeting_type_id),N(a.data.classSchedule.hashed_room_id),v(a.data.classSchedule.status),y(a.data.classSchedule.credit),S(a.data.classSchedule.location),_(a.data.classSchedule.material_plan),k(a.data.classSchedule.material_realization))}toggleRequiredMark(a){$(a.target).val()=="done"?$(".material-realization-required-mark").removeClass("d-none"):$(".material-realization-required-mark").addClass("d-none")}async submit(a){a.preventDefault();let i;this.id?i=await d(`${this.base_url}/class-schedules/${this.id}`,a.target):i=await d(`${this.base_url}/class-schedules`,a.target),i.status==200&&this.$router.pushState(`/apps/lecture/college-class/schedule/${this.$router.params.id}/class-schedule`)}}m(E,"defaultProps",{...j(["getData"]),onsubmit:null,title:"Untitled Modal",teachingLecturers:[],meetingTypes:[],timeSlots:[],academicPeriods:[],rooms:[],studyProgramId:"",id:null});export{E as default};
