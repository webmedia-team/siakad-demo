var d=Object.defineProperty;var c=(l,t,a)=>t in l?d(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;var n=(l,t,a)=>(c(l,typeof t!="symbol"?t+"":t,a),a);import{A as m,C as p,c as e,p as o}from"./index.d57021e8.js";import{i as u}from"./datatable.4b22066f.js";import{B as f}from"./button.d257158a.js";import{m as b}from"./map-actions.609b7ae0.js";import"./jquery.4c77f39d.js";const h=()=>({url:`${m}/feeder/employee`,table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,id:"id",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender(l,t,a,i){return`
                    <div class="form-check">
                        <input class="form-check-input dt-checkbox" type="checkbox" value="${a.id}">
                    </div>`}},{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender(l,t,a,i){return i.row+i.settings._iDisplayStart+1}},{title:"Nama",data:"name",name:"name",mRender:function(l,t,a){return` ${a.front_title==null?"":a.front_title+". "}
                                            ${l||"-"}${a.back_title==null?"":", "+a.back_title}`}},{title:"NIDN",data:"nidn",name:"nidn",mRender:function(l){return l==null?"-":l}},{title:"Jenis Kelamin",data:"gender",name:"gender",mRender:function(l){return l=="L"?"Laki-Laki":"Perempuan"}},{title:"Agama",data:"religion.name",name:"religion.name"},{title:"Tanggal Lahir",data:"birthdate",name:"birthdate",defaultContent:"-"},{title:"Status",data:"employee_active_status_id",name:"employee_active_status_id",mRender(l,t,a){return l==null?"-":`<strong>${a.employee_active_status.name}</strong>`}},{title:"Status",data:"feeder_id",name:"feeder_id",mRender:(l,t,a,i)=>{let s=`<span class="badge p-1 badge-soft-${l!=null?"success":"warning"} text-uppercase">
                        <i class="${l!=null?"ri-checkbox-circle-fill":"ri-alert-fill"} me-1 align-middle fs-16"></i>
                        ${l!=null?"Sudah Sync":"Belum Sync"}
                    </span>`;return a.feeder_description!=null&&(s+=`<br>
                            <span class="badge p-1 badge-soft-danger mt-2">
                                <i class="ri-error-warning-fill me-1 align-middle fs-16"></i>
                                ${a.feeder_description}
                            </span>
                        `),s}}],callback:()=>{},options:{order:[8,"desc"]}}),r="feeder/employee/sync";class g extends p{render(){var t,a;return e("div",{className:"intro-y"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{className:"mb-sm-0"},this.meta.title)),e("div",{className:"card dt-filter-card"},e("div",{className:"card-body"},e("div",{className:"row"},e("div",{className:"col-3"},e("label",{htmlFor:""},"Status Pegawai"),e("select",{name:"employee_active_status_id",className:"from-control js-choices dt-filter-input"},e("option",{value:""},"Pilih"),e("option",{value:"all"},"Semua Status Pegawai"),(t=this.employeeStatus)==null?void 0:t.map(i=>e("option",{value:i.hashid},i.name)))),e("div",{className:"col-3"},e("label",{htmlFor:""},"Jenis Kelamin"),e("select",{name:"gender",className:"from-control js-choices dt-filter-input"},e("option",{value:""},"Pilih"),e("option",{value:"all"},"Semua Jenis Kelamin"),e("option",{value:"L"},"Laki-Laki"),e("option",{value:"P"},"Perempuan"))),e("div",{className:"col-3"},e("label",{htmlFor:""},"Agama"),e("select",{name:"religion_id",className:"from-control js-choices dt-filter-input"},e("option",{value:""},"Pilih"),e("option",{value:"all"},"Semua Agama"),(a=this.religions)==null?void 0:a.map(i=>e("option",{value:i.hashid},i.name)))),e("div",{className:"col-3"},e("label",{htmlFor:""},"Sync"),e("select",{name:"sync",id:"sync",className:"from-control js-choices dt-filter-input"},e("option",{value:"all",selected:!0},"Semua"),e("option",{value:"0"},"Sudah Sync"),e("option",{value:"1"},"Belum Sync")))))),e("div",{className:"card shadow-sm mb-3"},e("div",{className:"card-header border-0"},e("div",{className:"row"},e("div",{className:"text-sm-end text-center"},e("div",{className:"dt-actions d-inline"}),e(f,{data:{refresh:!0,create:!1,filter:!0}}),e("div",{className:"dropdown d-inline"},e("button",{className:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown"},e("i",{className:"bx bx-sync"})," Sync Feeder"),e("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1","data-popper-placement":"bottom-start",style:"position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate(0px, 40px);"},e("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:this.downloadData},e("i",{className:"bx bx-download"})," Tarik Data Feeder")))))),e("div",{className:"card-body"},e("div",{className:"table-responsive table-card mb-1"},e("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))))}componentDidMount(){this.table=u("#dataTable",h())}async componentWillMount(){const{status:t,data:a}=await this.getData({model:["getReligions","getEmployeeActiveStatuses"]});this.religions=a.getReligions.original.religions,this.employeeStatus=a.getEmployeeActiveStatuses.original.employeeActiveStatuses}async downloadData(){let t,a=new FormData;a.append("act","getEmployee"),t=await o(`${r}`,a,{},!1),t.status==200&&(this.$router.reload(),this.table.ajax.reload)}async uploadData(){let t,a=new FormData;a.append("act","uploadEmployee");var i=window.checkedDataIds;if($(".dt-checkbox:checked").length<1)a.append("study_program_id",$("#study-program-id").val()),a.append("academic_period_id",$("#academic-period-id").val()),a.append("sync",$("#sync").val());else for(const s of i)a.append("employee[]",s);t=await o(`${r}`,a,{},!1),t.status==200&&(this.$router.reload(),this.table.ajax.reload)}}n(g,"defaultProps",{...b(["getData"]),table:null,religions:[],employeeStatus:[]});export{g as default};
