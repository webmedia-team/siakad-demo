var n=Object.defineProperty;var m=(s,a,t)=>a in s?n(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var o=(s,a,t)=>(m(s,typeof a!="symbol"?a+"":a,t),t);import{C as u,c as e,g as p,B as h}from"./index.d57021e8.js";import{m as g}from"./map-actions.609b7ae0.js";const b="report/certificate/";class _ extends u{async componentWillMount(){const a={model:["academicYears","studyPrograms","getJudicialPeriods"]},{status:t,data:i}=await this.getData(a);t==200&&(this.studyPrograms=i.studyPrograms,this.academicYears=i.academicYears,this.judicialPeriods=i.getJudicialPeriods.original.judicialPeriods)}render(){var a,t;return e("div",{class:"intro-y"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{class:"mb-sm-0"},(a=this.meta.title)!=null?a:"Untitled Page"),e("div",{className:"page-title-right"},e("div",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-link",{link:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item"},"Laporan"),e("li",{className:"breadcrumb-item"},"Mahasiswa"),e("li",{className:"breadcrumb-item active"},(t=this.meta.title)!=null?t:"Untitled Page")))))),e("div",{className:"card col-5",style:{marginLeft:440}},e("form",{onSubmit:this.handleSubmit},e("div",{className:"card-body "},e("div",{className:"mb-3"},e("label",{htmlFor:""},"Program Studi ",e("span",{className:"text-danger"},"*")),e("select",{name:"study_program_id",id:"study_program",className:"from-control js-choices dt-filter-input",required:!0},e("option",{value:""},"Pilih"),this.studyPrograms.map(i=>e("option",{value:i.id},i.education_level.code," - ",i.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Angkatan",e("span",{className:"text-danger"},"*")),e("select",{name:"academic_year_id",id:"academic_year_id",className:"from-control js-choices dt-filter-input",required:!0},e("option",{value:""},"Pilih"),this.academicYears.map(i=>e("option",{value:i.id},i.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Periode Yudisium",e("span",{className:"text-danger"},"*")),e("select",{name:"judicial_period_id",id:"judicial_period_id",className:"from-control js-choices dt-filter-input",required:!0},e("option",{value:""},"Pilih"),this.judicialPeriods.map(i=>e("option",{value:i.id},i.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Mahasiswa",e("span",{className:"text-danger"},"*")),e("select",{name:"student_id",id:"student_id",className:"from-control js-choices dt-filter-input"},e("option",{value:""},"Pilih")))),e("div",{className:"card-footer text-end"},e("button",{className:"btn btn-primary",type:"submit","data-form-loading":!0},"Cetak")))))}componentDidMount(){const a=$(".js-choices");a[3].choices.passedElement.element.addEventListener("search",async t=>{var i;if(a[3].choices.clearChoices(),t.detail.value.length>2){const{data:c}=await p(`${b}singel-search?name=${encodeURI(t.detail.value)}`,{hideSuccessNotification:!0,hideLoadingBar:!0});(i=c.students)!=null&&i.length&&(a[3].choices.clearChoices(),a[3].choices.setChoices(c.students.map(d=>({value:d.id,label:d.nim+" - "+d.name}))))}})}handleSubmit(a){a.preventDefault();let t=$('select[name="study_program_id"]').val(),i=$('select[name="student_id"]').val(),c=$('select[name="academic_year_id"]').val(),d=$('select[name="judicial_period_id"]').val();const l=`${h}/api/v1/report/student/certificate/print?study_program_id=${t}&student_id=${i}&academic_year_id=${c}&judicial_period_id=${d}`,r=window.open(`${l}`,"_blank","resizable=yes,scrollbars=yes,status=yes");r&&(r.opener=null,r.location=`${l}`,r.addEventListener("beforeunload",function(){r.location=`${l}`}))}}o(_,"defaultProps",{...g(["getStudyPrograms","getAcademicYears","getData","getJudicialPeriods"]),table:null,studyPrograms:[],academicYears:[],student:[],judicialPeriods:[]});export{_ as default};
