var u=Object.defineProperty;var p=(i,s,t)=>s in i?u(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var h=(i,s,t)=>(p(i,typeof s!="symbol"?s+"":s,t),t);import{C as g,g as n,c as e,i as y,p as b}from"./index.d57021e8.js";const r="lecturer/lecture/presences";class N extends g{async componentWillMount(){const s=await n(`${r}/get-courses`,{hideSuccessNotification:!0});s.status==200&&(this.courses=s.data.courses)}render(){var s;return e("div",{className:"intro-y"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{className:"mb-sm-0"},this.meta.title),e("div",{className:"page-title-right"},e("ol",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-name",{name:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item active"},"Perkuliahan"),e("li",{className:"breadcrumb-item active"},this.meta.title)))))),e("div",{className:"card shadow-sm mb-3"},e("div",{className:"card-body"},e("div",{className:"row"},e("div",{className:"col-sm-6 col-12"},e("div",{className:"mb-3"},e("label",null,"Matakuliah"),e("select",{className:"form-control js-choices",name:"course_id",onChange:this.fetchCollegeClasses},e("option",{value:"",key:""},"Pilih"),(s=this.courses)==null?void 0:s.map(t=>e("option",{value:t.id,key:""},t.code," - ",t.name))))),e("div",{className:"col-sm-6 col-12"},e("div",{className:"mb-3"},e("label",null,"Kelas Kuliah"),e("select",{className:"form-control js-choices",name:"college_class_id",onChange:this.fetchData},e("option",{value:"",key:""},"Pilih"))))))),e("div",{className:"card shadow-sm mb-3"},e("form",{onsubmit:this.submit},e("div",{className:"card-header border-0 text-end"},y("update-lecturer-presences")?e("button",{className:"btn btn-primary d-none",type:"submit"},e("i",{className:"bx bx-save"})," Simpan"):""),e("div",{className:"card-body",id:"renderData",style:"min-height: 300px;"},e("div",{className:"text-center mb-4"},e("lord-icon",{src:"https://cdn.lordicon.com/msoeawqm.json",trigger:"loop",colors:"primary:#66a1ee,secondary:#3080e8",style:"width:150px;height:150px"}),e("h5",{className:"text-muted mb-0"},"Opps! tidak ada yang dapat ditampilkan."))))))}componentDidMount(){this.query("courseId")!=null&&this.query("collegeClassId")!=null&&($(".js-choices")[0].choices.setChoiceByValue(this.query("courseId")),this.fetchCollegeClasses())}async fetchCollegeClasses(){var t;let s=$('*[name="course_id"').val();if(s!=""&&s!=null){const{status:a,data:l}=await n(`${r}/get-college-classes?course_id=${s}`,{hideSuccessNotification:!0});if(a==200){$(".js-choices")[1].choices.clearChoices(),$(".js-choices")[1].choices.clearStore(),$(".js-choices")[1].choices.clearInput();let c=[];(t=l==null?void 0:l.collegeClasses)==null||t.forEach(o=>{var d,m;c.push({value:o.id,label:o.name+" | "+((m=(d=o==null?void 0:o.lecture_system)==null?void 0:d.name)!=null?m:"-")+" | Peserta "+o.class_participant_count+" Orang"})}),$(".js-choices")[1].choices.setChoices(c),this.query("courseId")!=null&&this.query("collegeClassId")!=null&&($(".js-choices")[1].choices.setChoiceByValue(this.query("collegeClassId")),this.fetchData())}}}async fetchData(){let s=$('*[name="course_id"').val(),t=$('*[name="college_class_id"').val();if(s!=""&&s!=null&&t!=""&&t!=null){$("#renderData").attr("style","min-height: 300px"),$("#renderData").html(""),$("#renderData").waitMe({effect:"win8",bg:"rgba(255, 255, 255, .7)",color:"#6691e7",text:"Mengambil data..."});const{status:a,data:l}=await n(`${r}/get-class-participants?course_id=${s}&college_class_id=${t}`,{hideSuccessNotification:!0});$("#renderData").waitMe("hide"),a==200&&(l.collections.length>0?($("#renderData").parent().find('button[type="submit"]').removeClass("d-none"),$("#renderData").parent().find('button[type="submit"]').show(),$("#renderData").removeAttr("style"),document.querySelector("#renderData").innerHTML="",document.querySelector("#renderData").appendChild(this.renderHTML(l.headers,l.collections))):($("#renderData").parent().find('button[type="submit"]').hide(),$("#renderData").attr("style","min-height: 300px"),$("#renderData").append(`
                        <div className="text-center mb-4">
                            <lord-icon
                                src="https://cdn.lordicon.com/msoeawqm.json"
                                trigger="loop"
                                colors="primary:#66a1ee,secondary:#3080e8"
                                style="width:150px;height:150px">
                            </lord-icon>
                            <h5 className="text-muted mb-0">Opps! tidak ada yang dapat ditampilkan.</h5>
                        </div>
                    `)))}}renderHTML(s,t){return e("div",{className:"table-card table-responsive"},e("table",{className:"table zero-configuration table-bordered"},e("thead",{className:"bg-light"},e("tr",{key:""},e("th",{rowspan:"2",valign:"middle",width:"2%",className:"text-center"},"No."),e("th",{rowspan:"2",valign:"middle"},"Nama Mahasiswa"),e("th",{colspan:"16",className:"text-center"},"Perkuliahan Ke")),e("tr",{key:""},s.map(a=>e("th",{width:"60",className:"text-center"},a)))),e("tbody",null,t.map((a,l)=>e("tr",{key:""},e("input",{type:"hidden",name:"student_id[]",value:a.id}),e("td",null,parseInt(l)+1),e("td",{style:"white-space: nowrap"},a.name),s.map(c=>e("td",{width:"60",className:"text-center"},e("select",{name:`meeting_${c}[]`,className:"form-control text-center"},e("option",{value:"0",key:"",selected:a["meeting_of_"+c]==0},"-"),e("option",{value:"H",key:"",selected:a["meeting_of_"+c]=="H"},"H"),e("option",{value:"I",key:"",selected:a["meeting_of_"+c]=="I"},"I"),e("option",{value:"S",key:"",selected:a["meeting_of_"+c]=="S"},"S"),e("option",{value:"A",key:"",selected:a["meeting_of_"+c]=="A"},"A")))))))))}async submit(s){s.preventDefault(),this.showWaiting(),await b(`${r}?college_class_id=${$('*[name="college_class_id"').val()}`,s.target),this.hideWaiting()}}h(N,"defaultProps",{courses:null,collegeClasses:null});export{N as default};
