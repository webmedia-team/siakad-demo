var n=Object.defineProperty;var m=(s,t,a)=>t in s?n(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var d=(s,t,a)=>(m(s,typeof t!="symbol"?t+"":t,a),a);import{A as p,C as u,c as e,p as i,S as c}from"./index.d57021e8.js";import{i as f}from"./datatable.4b22066f.js";import{B as h}from"./button.d257158a.js";import{m as b}from"./map-actions.609b7ae0.js";import"./jquery.4c77f39d.js";const g=()=>({url:`${p}/feeder/score/score-scale`,table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,name:"id",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender:(s,t,a,r)=>`
                    <div class="form-check">
                        <input class="form-check-input dt-checkbox" type="checkbox" value="${a.id}">
                    </div>`},{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender:(s,t,a,r)=>r.row+r.settings._iDisplayStart+1},{title:"Program Studi",data:"study_program.name",name:"study_program.name",mRender:(s,t,a,r)=>{var l;return((l=a.study_program.education_level)==null?void 0:l.code)+" - "+s}},{title:"Nilai Huruf",data:"grade",name:"grade"},{title:"Nilai Indeks",data:"index_score",name:"index_score"},{title:"Nilai Minimal",data:"min_score",name:"min_score"},{title:"Nilai Maksimal",data:"max_score",name:"max_score"},{title:"Tanggal Mulai",data:"date_start",name:"date_start",mRender:(s,t,a,r)=>s==null||s==""?"-":s.split("-")[2]+"-"+s.split("-")[1]+"-"+s.split("-")[0]},{title:"Tanggal Berakhir",data:"date_end",name:"date_end",mRender:(s,t,a,r)=>s==null||s==""?"-":s.split("-")[2]+"-"+s.split("-")[1]+"-"+s.split("-")[0]},{title:"Status",data:"feeder_id",name:"feeder_id",mRender:(s,t,a,r)=>{let l=`<span class="badge p-1 badge-soft-${s!=null?"success":"warning"} text-uppercase">
                        <i class="${s!=null?"ri-checkbox-circle-fill":"ri-alert-fill"} me-1 align-middle fs-16"></i>
                        ${s!=null?"Sudah Sync":"Belum Sync"}
                    </span>`;return a.feeder_description!=null&&(l+=`<br>
                            <span class="badge p-1 badge-soft-danger mt-2">
                                <i class="ri-error-warning-fill me-1 align-middle fs-16"></i>
                                ${a.feeder_description}
                            </span>
                        `),l}}],callback:()=>{},options:{sort:[7,"desc"]}}),o="feeder/score/score-scale/sync";class y extends u{render(){var t;return e("div",{className:"intro-y"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{className:"mb-sm-0"},this.meta.title)),e("div",{className:"card dt-filter-card"},e("div",{className:"card-body"},e("div",{className:"row"},e("div",{className:"col-6"},e("label",{htmlFor:""},"Program Studi"),e("select",{name:"study_program_id",id:"study-program-id",className:"from-control js-choices dt-filter-input"},e("option",{value:""},"Pilih"),e("option",{value:"all"},"Semua Program Studi"),(t=this.studyPrograms)==null?void 0:t.map(a=>{var r;return e("option",{value:a.id},(r=a.education_level)==null?void 0:r.code," - ",a.name)}))),e("div",{className:"col-6"},e("label",{htmlFor:""},"Sync"),e("select",{name:"sync",id:"sync",className:"from-control js-choices dt-filter-input"},e("option",{value:"all",selected:!0},"Semua"),e("option",{value:"0"},"Sudah Sync"),e("option",{value:"1"},"Belum Sync")))))),e("div",{className:"card shadow-sm mb-3"},e("div",{className:"card-header border-0"},e("div",{className:"row"},e("div",{className:"text-sm-end text-center"},e("div",{className:"dt-actions d-inline"}),e(h,{data:{refresh:!0,create:!1,filter:!0}}),e("div",{className:"dropdown d-inline"},e("button",{className:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown"},e("i",{className:"bx bx-sync"})," Sync Feeder"),e("div",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1","data-popper-placement":"bottom-start",style:"position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate(0px, 40px);"},e("a",{class:"dropdown-item",href:"#",onClick:this.downloadData},e("i",{className:"bx bx-download"})," Tarik Data Feeder"),e("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:this.uploadData},e("i",{className:"bx bx-upload"})," Upload Data"),e("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:this.updateData},e("i",{className:"bx bx-refresh"})," Update Data"),e("a",{class:"dropdown-item",href:"javascript:void(0);",onClick:this.deleteData},e("i",{className:"bx bx-trash"})," Delete Data")))))),e("div",{className:"card-body"},e("div",{className:"table-responsive table-card mb-1"},e("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))))}componentDidMount(){this.table=f("#dataTable",g())}async componentWillMount(){const{data:t}=await this.getStudyPrograms();this.studyPrograms=t.studyPrograms}async downloadData(){let t,a=new FormData;a.append("act","getScoreScale"),t=await i(`${o}`,a,{},!1),t.status==200&&(this.$router.reload(),this.table.ajax.reload)}async uploadData(){let t,a=new FormData;var r=window.checkedDataIds;if(a.append("act","uploadScoreScale"),$(".dt-checkbox:checked").length<1)a.append("study_program_id",$("#study-program-id").val()),a.append("sync",$("#sync").val()),t=await i(`${o}`,a,{},!1);else{for(const l of r)a.append("scoreScale[]",l);t=await i(`${o}`,a,{},!1)}t.status==200&&(this.$router.reload(),this.table.ajax.reload)}async updateData(){var t=window.checkedDataIds;if($(".dt-checkbox:checked").length<1)c.fire({title:"Delete Feeder gagal!",text:"Anda harus memilih Skala Nilai",icon:"error",confirmButtonColor:"#d1403b"});else{let a,r=new FormData;r.append("act","updateScoreScale");for(const l of t)r.append("scoreScale[]",l);a=await i(`${o}`,r,{},!1),a.status==200&&(this.$router.reload(),this.table.ajax.reload)}}async deleteData(){var t=window.checkedDataIds;if($(".dt-checkbox:checked").length<1)c.fire({title:"Delete Feeder gagal!",text:"Anda harus memilih Skala Nilai",icon:"error",confirmButtonColor:"#d1403b"});else{let a,r=new FormData;r.append("act","deleteScoreScale");for(const l of t)r.append("scoreScale[]",l);a=await i(`${o}`,r,{},!1),a.status==200&&(this.$router.reload(),this.table.ajax.reload)}}}d(y,"defaultProps",{...b(["getStudyPrograms"]),table:null,studyPrograms:[]});export{y as default};
