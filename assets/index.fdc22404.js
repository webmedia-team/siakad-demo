var se=Object.defineProperty;var ie=(d,n,t)=>n in d?se(d,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[n]=t;var re=(d,n,t)=>(ie(d,typeof n!="symbol"?n+"":n,t),t);import{C as le,g as N,c as e,i as ce,p as oe}from"./index.d57021e8.js";import{H as me}from"./header-component.8d40ee12.js";class ue extends le{async componentWillMount(){const{status:n,data:t}=await N(`lecture/college-class/${this.$router.params.id}/student-grades`,{hideSuccessNotification:!0});n==200&&(this.classParticipant=t.classParticipant,this.scorePercentage=t.scorePercentage,this.collegeClass=t.collegeClass)}render(){var n,t,i,l,c,o,m,p,_,g,h,k,b,y,s,f,x,P;return e("div",{className:"intro-y"},e(me,{id:this.$router.params.id}),e("div",{className:"card shadow-sm"},e("form",{onsubmit:this.submit},e("div",{className:"card-header border-0"},e("div",{className:"row"},this.collegeClass.feeder_id==null&&ce("update-student-grades")?e("div",{className:"col-sm-12 text-sm-end text-center"},e("button",{type:"button",className:"btn btn-warning",onclick:this.publishScore},e("i",{className:"bx bx-share"})," ",((i=(t=(n=this.classParticipant[0])==null?void 0:n.student)==null?void 0:t.score[0])==null?void 0:i.is_publish)||typeof((o=(c=(l=this.classParticipant[0])==null?void 0:l.student)==null?void 0:c.score[0])==null?void 0:o.is_publish)>"u"?"Publish Nilai":"Sembunyikan Nilai"),e("button",{type:"button",className:"btn btn-dark mx-1",onclick:this.lockScore},e("i",{className:"bx bx-lock"})," ",this.collegeClass.is_lock_score=="0"?"Kunci Nilai":"Buka Nilai"),e("button",{type:"submit",className:"btn btn-primary","data-form-loading":!0},e("i",{className:"bx bx-save"})," Simpan")):"")),e("div",{className:"card-body pb-0",id:"dataLoaded",style:"min-height: 300px;"},e("div",{className:"table-responsive table-card"},e("table",{className:"table mb-3 zero-configuration table-nowrap"},e("thead",null,e("tr",null,e("th",{colSpan:2,valign:"middle"},"Setting Presentase"),e("th",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score_percentage_mid_exam",value:(p=(m=this.scorePercentage)==null?void 0:m.mid_exam)!=null?p:0,ref:this.collegeClass.feeder_id==null?this.setPercentage:"",readonly:!0})),e("th",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score_percentage_final_exam",value:(g=(_=this.scorePercentage)==null?void 0:_.final_exam)!=null?g:0,ref:this.collegeClass.feeder_id==null?this.setPercentage:"",readonly:!0})),e("th",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score_percentage_course_work",value:(k=(h=this.scorePercentage)==null?void 0:h.coursework)!=null?k:0,ref:this.collegeClass.feeder_id==null?this.setPercentage:"",readonly:!0})),e("th",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score_percentage_quiz",value:(y=(b=this.scorePercentage)==null?void 0:b.quiz)!=null?y:0,ref:this.collegeClass.feeder_id==null?this.setPercentage:"",readonly:!0})),e("th",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score_percentage_attendance",value:(f=(s=this.scorePercentage)==null?void 0:s.attendance)!=null?f:0,ref:this.collegeClass.feeder_id==null?this.setPercentage:"",readonly:!0})),e("th",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score_percentage_practice",value:(P=(x=this.scorePercentage)==null?void 0:x.practice)!=null?P:0,ref:this.collegeClass.feeder_id==null?this.setPercentage:"",readonly:!0})),e("th",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score_percentage_total",readonly:!0}))),e("tr",{className:"table-light"},e("th",null,"No. "),e("th",null,"Nama"),e("th",null,"UTS"),e("th",null,"UAS"),e("th",null,"Tugas"),e("th",null,"Kuis"),e("th",null,"KHD"),e("th",null,"Prak"),e("th",null,"NA"),e("th",{width:80},"UP"),e("th",{width:80},"NHU"),e("th",{width:80},"NH"))),e("tbody",null,this.classParticipant.length>0?this.classParticipant.map((a,u)=>{var w,I,U,K,S,C,v,z,q,E,M,A,D,T,H,W,j,J,B,L,F,G,O,R,Q,V,X,Y,Z,ee,ae,te,ne;return e("tr",null,e("td",null,u+1),e("td",null,a==null?void 0:a.student.name,e("input",{type:"hidden",name:"student_id[]",value:a==null?void 0:a.student_id})),e("td",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,onKeyDown:this.disableEnter,onKeyUp:r=>{this.handleInput(r,u)},value:(U=(I=(w=a==null?void 0:a.student)==null?void 0:w.score[0])==null?void 0:I.mid_exam)!=null?U:0,className:"form-control",placeholder:"0",readonly:this.collegeClass.is_lock_score=="1",name:"mid_exam[]"})),e("td",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,onKeyDown:this.disableEnter,onKeyUp:r=>{this.handleInput(r,u)},value:(C=(S=(K=a==null?void 0:a.student)==null?void 0:K.score[0])==null?void 0:S.final_exam)!=null?C:0,className:"form-control",placeholder:"0",readonly:this.collegeClass.is_lock_score=="1",name:"final_exam[]"})),e("td",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,onKeyDown:this.disableEnter,onKeyUp:r=>{this.handleInput(r,u)},value:(q=(z=(v=a==null?void 0:a.student)==null?void 0:v.score[0])==null?void 0:z.coursework)!=null?q:0,className:"form-control",placeholder:"0",readonly:this.collegeClass.is_lock_score=="1",name:"course_work[]"})),e("td",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,onKeyDown:this.disableEnter,onKeyUp:r=>{this.handleInput(r,u)},value:(A=(M=(E=a==null?void 0:a.student)==null?void 0:E.score[0])==null?void 0:M.quiz)!=null?A:0,className:"form-control",placeholder:"0",readonly:this.collegeClass.is_lock_score=="1",name:"quiz[]"})),e("td",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,onKeyDown:this.disableEnter,onKeyUp:r=>{this.handleInput(r,u)},value:(H=(T=(D=a==null?void 0:a.student)==null?void 0:D.score[0])==null?void 0:T.attendance)!=null?H:0,className:"form-control",placeholder:"0",readonly:this.collegeClass.is_lock_score=="1",name:"attendance[]"})),e("td",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,onKeyDown:this.disableEnter,onKeyUp:r=>{this.handleInput(r,u)},value:(J=(j=(W=a==null?void 0:a.student)==null?void 0:W.score[0])==null?void 0:j.practice)!=null?J:0,className:"form-control",placeholder:"0",readonly:this.collegeClass.is_lock_score=="1",name:"practice[]"})),e("td",{width:90},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",name:"score[]",value:(F=(L=(B=a==null?void 0:a.student)==null?void 0:B.score[0])==null?void 0:L.score)!=null?F:0,readonly:!0})),e("td",{width:80},e("input",{type:"number",inputMode:"decimal",step:"any",min:0,max:100,className:"form-control",placeholder:"0",readonly:this.collegeClass.is_lock_score=="1",name:"remedial_score[]",value:((O=(G=a==null?void 0:a.student)==null?void 0:G.score[0])==null?void 0:O.score)!=((Q=(R=a==null?void 0:a.student)==null?void 0:R.score[0])==null?void 0:Q.final_score)?(X=(V=a==null?void 0:a.student)==null?void 0:V.score[0])==null?void 0:X.final_score:0})),e("td",{width:80},e("input",{type:"text",className:"form-control",placeholder:"0",name:"grade[]",value:(ee=(Z=(Y=a==null?void 0:a.student)==null?void 0:Y.score[0])==null?void 0:Z.grade)!=null?ee:"E",readonly:!0})),e("td",{width:80},e("input",{type:"text",className:"form-control",placeholder:"0",name:"final_grade[]",value:(ne=(te=(ae=a==null?void 0:a.student)==null?void 0:ae.score[0])==null?void 0:te.final_grade)!=null?ne:"E",readonly:!0})))}):e("tr",null,e("td",{colspan:"12"},e("div",{class:"text-center"},e("lord-icon",{src:"https://cdn.lordicon.com/bbnkwdur.json",trigger:"loop",colors:"primary:#405189,secondary:#0ab39c",style:"width:75px;height:75px"}),e("h5",{class:"mt-2"},"Opps! Belum Ada Data"),e("p",{class:"text-muted"},"Data kamu masih kosong.")))))))))),e("div",{class:"intro-y card shadow-sm p-2 mt-3"},e("div",{className:"card-body"},e("h5",{className:"fw-bold mb-3"},"Petunjuk Pengisian :"),e("ol",null,e("li",{className:"p-1"},"Pilih Periode Perkuliahan, Program Studi, Mata Kuliah dan Kelas untuk menentukan daftar nilai yang akan dibuka."),e("li",{className:"p-1"},"Tentukan presentase penilaian untuk kolom UTS, UAS, Tugas, Kuis, Kehadiran dan Praktikum dengan membuka menu kelas perkuliahan. Perubahan sebelumnya akan dibatalkan jika belum menekan tombol ",e("b",null,"Simpan"),"."),e("li",{className:"p-1"},"Terdapat 2 bagian pengisian yaitu ",e("b",null,"Nilai Utama")," (UTS, UAS, Tugas, Kuis, Kehadiran, Praktikum) dan ",e("b",null,"Nilai Up")," (Nilai yang digunakan pada saat Nilai Akhir tidak mencukupi)."),e("li",{className:"p-1"},"Kolom pengisian hanya menerima data nilai bulat dari angka 0 sampai 100."),e("li",{className:"p-1"},"Lakukan pengisian pada ",e("b",null,"Nilai Utama")," terlebih dahulu. Sebaiknya diisi lengkap (UTS, UAS, Tugas, Kuis, Kehadiran, Praktikum). Jika terdapat kolom yang tidak ingin diisi (dikosongi), maka kosongkan saja kolom tersebut dan setting kembali presentase nilainya."),e("li",{className:"p-1"},"Untuk mahasiswa yang terkena UP, masukkan nilai pada kolom ",e("b",null,"UP"),"."),e("li",{className:"p-1"},"Tekan tombol simpan untuk menyimpan data."),e("li",{className:"p-1"},e("b",null,"Nilai Huruf")," akan dihitung setelah data disimpan dan dihitung dari nilai akhir yang masuk (UP atau NA)."),e("li",{className:"p-1"},"Jika anda sudah benar - benar yakin bahwa nilai sudah dimasukkan semua dengan benar, maka untuk menjaga keamanan nilai, lakukan Penguncian nilai dengan menekan tombol ",e("b",null,"Kunci Nilai"),"."),e("li",{className:"p-1"},"Secara default nilai tidak akan diperlihatkan ke mahasiswa, apabila anda menginginkan untuk nilai tersebut dapat dilihat oleh mahasiswa/umum, silahkan klik tombol ",e("b",null,"Publish Nilai"),".")),e("i",{className:"text-black-50"},"*Catatan :",e("br",null),e("ul",null,e("li",null,"UTS : Ujian Tengah Semester"),e("li",null,"UAS : Ujian Akhir semester"),e("li",null,"TUGAS : Nilai Tugas"),e("li",null,"KUIS : Nilai Kuis"),e("li",null,"KHD : Nilai Kehadiran"),e("li",null,"PRAK : Nilai Praktikum"),e("li",null,"NA : Nilai Akhir"),e("li",null,"UP : Nilai UP (Jika NA gagal)"),e("li",null,"NHU : Nilai Huruf hasil sebelum UP (Dari NA, nilai sementara sebelum ditampilkan ke mahasiswa"),e("li",null,"NH : Nilai Huruf termasuk UP (Nilai yang digunakan untuk rapat kenaikan)."))))))}componentDidMount(){let n=$('*[name="score_percentage_mid_exam"]').val()==""?0:$('*[name="score_percentage_mid_exam"]').val(),t=$('*[name="score_percentage_final_exam"]').val()==""?0:$('*[name="score_percentage_final_exam"]').val(),i=$('*[name="score_percentage_course_work"]').val()==""?0:$('*[name="score_percentage_course_work"]').val(),l=$('*[name="score_percentage_quiz"]').val()==""?0:$('*[name="score_percentage_quiz"]').val(),c=$('*[name="score_percentage_attendance"]').val()==""?0:$('*[name="score_percentage_attendance"]').val(),o=$('*[name="score_percentage_practice"]').val()==""?0:$('*[name="score_percentage_practice"]').val(),m=parseInt(n)+parseInt(t)+parseInt(i)+parseInt(l)+parseInt(c)+parseInt(o);$('*[name="score_percentage_total"]').val(m)}disableEnter(n){if(n.keyCode==13)return n.preventDefault(),!1}handleInput(n,t){n.target.value>100&&$(n.target).val(100),n.target.value.length>1&&n.target.value.charAt(0)==0&&$(n.target).val(n.target.value.substring(1)),$('*[name="score_percentage_mid_exam"]').attr("readonly",!0),$('*[name="score_percentage_final_exam"]').attr("readonly",!0),$('*[name="score_percentage_course_work"]').attr("readonly",!0),$('*[name="score_percentage_quiz"]').attr("readonly",!0),$('*[name="score_percentage_attendance"]').attr("readonly",!0),$('*[name="score_percentage_practice"]').attr("readonly",!0);let i=$($('*[name="mid_exam[]"]')[t]).val()==""?0:$($('*[name="mid_exam[]"]')[t]).val(),l=$($('*[name="final_exam[]"]')[t]).val()==""?0:$($('*[name="final_exam[]"]')[t]).val(),c=$($('*[name="course_work[]"]')[t]).val()==""?0:$($('*[name="course_work[]"]')[t]).val(),o=$($('*[name="quiz[]"]')[t]).val()==""?0:$($('*[name="quiz[]"]')[t]).val(),m=$($('*[name="attendance[]"]')[t]).val()==""?0:$($('*[name="attendance[]"]')[t]).val(),p=$($('*[name="practice[]"]')[t]).val()==""?0:$($('*[name="practice[]"]')[t]).val(),_=$('*[name="score_percentage_mid_exam"]').val()==""?0:$('*[name="score_percentage_mid_exam"]').val(),g=$('*[name="score_percentage_final_exam"]').val()==""?0:$('*[name="score_percentage_final_exam"]').val(),h=$('*[name="score_percentage_course_work"]').val()==""?0:$('*[name="score_percentage_course_work"]').val(),k=$('*[name="score_percentage_quiz"]').val()==""?0:$('*[name="score_percentage_quiz"]').val(),b=$('*[name="score_percentage_attendance"]').val()==""?0:$('*[name="score_percentage_attendance"]').val(),y=$('*[name="score_percentage_practice"]').val()==""?0:$('*[name="score_percentage_practice"]').val(),s=parseInt(_)+parseInt(g)+parseInt(h)+parseInt(k)+parseInt(b)+parseInt(y),f=parseInt(i)*parseInt(_)/parseInt(s)+parseInt(l)*parseInt(g)/parseInt(s)+parseInt(c)*parseInt(h)/parseInt(s)+parseInt(o)*parseInt(k)/parseInt(s)+parseInt(m)*parseInt(b)/parseInt(s)+parseInt(p)*parseInt(y)/parseInt(s);$($('*[name="score[]"]')[t]).val(isNaN(f)?0:f.toFixed(2))}setPercentage(n){$(n).unbind().on("dblclick",function(){$('*[name="score_percentage_mid_exam"]').attr("readonly",!0),$('*[name="score_percentage_final_exam"]').attr("readonly",!0),$('*[name="score_percentage_course_work"]').attr("readonly",!0),$('*[name="score_percentage_quiz"]').attr("readonly",!0),$('*[name="score_percentage_attendance"]').attr("readonly",!0),$('*[name="score_percentage_practice"]').attr("readonly",!0),$(n).attr("readonly",!1)}),$(n).on("keydown",function(t){if(t.keyCode==13)return $('*[name="score_percentage_mid_exam"]').attr("readonly",!0),$('*[name="score_percentage_final_exam"]').attr("readonly",!0),$('*[name="score_percentage_course_work"]').attr("readonly",!0),$('*[name="score_percentage_quiz"]').attr("readonly",!0),$('*[name="score_percentage_attendance"]').attr("readonly",!0),$('*[name="score_percentage_practice"]').attr("readonly",!0),t.preventDefault(),!1}),$(n).on("keyup",function(){let t=$('*[name="score_percentage_mid_exam"]').val()==""?0:$('*[name="score_percentage_mid_exam"]').val(),i=$('*[name="score_percentage_final_exam"]').val()==""?0:$('*[name="score_percentage_final_exam"]').val(),l=$('*[name="score_percentage_course_work"]').val()==""?0:$('*[name="score_percentage_course_work"]').val(),c=$('*[name="score_percentage_quiz"]').val()==""?0:$('*[name="score_percentage_quiz"]').val(),o=$('*[name="score_percentage_attendance"]').val()==""?0:$('*[name="score_percentage_attendance"]').val(),m=$('*[name="score_percentage_practice"]').val()==""?0:$('*[name="score_percentage_practice"]').val(),p=parseInt(t)+parseInt(i)+parseInt(l)+parseInt(c)+parseInt(o)+parseInt(m);$('*[name="score_percentage_total"]').val(p)})}async submit(n){n.preventDefault(),(await oe(`lecture/college-class/${this.$router.params.id}/student-grades`,n.target)).status==200&&this.$router.reload()}async lockScore(n){n.preventDefault(),this.showWaiting();const t=await N(`lecture/college-class/${this.$router.params.id}/student-grades/lock`);this.hideWaiting(),t.status==200&&this.$router.reload()}async publishScore(n){n.preventDefault(),this.showWaiting();const t=await N(`lecture/college-class/${this.$router.params.id}/student-grades/published`);this.hideWaiting(),t.status==200&&this.$router.reload()}}re(ue,"defaultProps",{classParticipant:null,scorePercentage:null,collegeClass:null});export{ue as default};
