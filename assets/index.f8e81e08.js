var x=Object.defineProperty;var v=(i,e,t)=>e in i?x(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var m=(i,e,t)=>(v(i,typeof e!="symbol"?e+"":e,t),t);import{A as w,i as d,C as f,c as a,g as p,h as N,p as b,S as h,u as g}from"./index.d57021e8.js";import{i as _}from"./datatable.4b22066f.js";import{H as k}from"./header-component.12ae7606.js";/* empty css                 */const C=(i,e,t,n)=>({url:`${w}/lecturer/lecture/college-class/${i}/class-schedules`,table:[{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender:(s,c,l,u)=>u.row+u.settings._iDisplayStart+1},{title:"Pert.",data:"meeting_number",name:"meeting_number",defaultContent:"-"},{title:"Hari",data:"formatted_date",name:"date",defaultContent:"-"},{title:"Waktu",data:"formatted_time_range",name:"time_start",defaultContent:"-"},{title:"Ruang",data:"room.name",name:"room.name",defaultContent:"-",mRender(s,c,l){return`${s}${l.room.location?` - ${l.room.location}`:""}`}},{title:"Jenis",data:"meeting_type.name",name:"meeting_type_id",defaultContent:"-"},{title:"Pengajar",data:"employee.name",name:"employee.name",defaultContent:"-",mRender(s,c,l){return`${l.employee.front_title?`${l.employee.front_title}.`:""} ${s} ${l.employee.back_title?`, ${l.employee.back_title}`:""}`}},{title:"Status",data:"status",name:"status",defaultContent:"-",mRender(s){switch(s){case"schedule":return'<span class="badge badge-soft-primary">Terjadwal</span>';case"start":return'<span class="badge badge-soft-warning">Dimulai</span>';case"done":return'<span class="badge badge-soft-success">Selesai</span>';case"reschedule":return'<span class="badge badge-soft-secondary">Dijadwalkan Ulang</span>';default:return"-"}}},{title:"",data:"id",name:"id",searchable:!1,orderable:!1,sClass:"text-center nowrap",mRender:(s,c,l,u)=>{var o="";return l.college_class.feeder_id||(l.status!="done"&&l.status!="reschedule"&&(d("update-lecturer-college-class-schedules")&&(o+=`<button type="button" class="btn btn-outline-primary btn-sm mx-1" data-toggle="edit" data-id="${s}"><i class="bx bx-pencil"></i></button>`),d("delete-lecturer-college-class-schedules")&&(o+=`<button type="button" class="btn btn-outline-danger btn-sm mx-1" data-toggle="delete" data-id="${s}"><i class="bx bx-trash"></i></button>`)),l.status=="done"&&d("update-lecturer-college-class-schedules")&&(o+=`<button type="button" class="btn btn-outline-primary btn-sm mx-1" data-toggle="realization" data-id="${s}"><i class="ri-file-edit-line"></i></button>`)),o}}],callback:()=>{$('button[data-toggle="delete"]').unbind().on("click",function(s){s.preventDefault(),e($(this).data("id"))}),$('button[data-toggle="edit"]').off("click").on("click",function(s){s.preventDefault(),t($(this).data("id"))}),$('button[data-toggle="realization"]').off("click").on("click",function(s){s.preventDefault(),n($(this).data("id"))})},options:{sort:[2,"asc"]}});class y extends f{render(){return a("div",{className:"modal fade",id:"realization-modal",role:"dialog"},a("div",{className:"modal-dialog",role:"document"},a("div",{className:"modal-content"},a("form",{onsubmit:this.props.onsubmit},a("div",{className:"modal-header bg-light pb-2"},a("h5",{className:"modal-title"},this.props.title)),a("div",{className:"modal-body"},a("div",{className:"mb-3"},a("label",{for:"name"},"Rencana Materi ",a("span",{className:"text-danger"},"*")),a("textarea",{name:"material_plan",id:"material_plan",className:"form-control",cols:"30",rows:"4"})),a("div",{className:"mb-3"},a("label",{for:"name"},"Realisasi Materi ",a("span",{className:"text-danger"},"*")),a("textarea",{name:"material_realization",className:"form-control",id:"material_realization",cols:"30",rows:"4"}))),a("div",{className:"modal-footer"},a("button",{type:"button",className:"btn btn-light","data-bs-dismiss":"modal"},"Batal"),a("button",{type:"submit",className:"btn btn-primary","data-form-loading":!0},a("i",{className:"bx bx-save"})," Simpan"))))))}}m(y,"defaultProps",{onsubmit:null,title:"Untitled Modal",data:null});const r="lecturer/lecture/college-class",[D,R]=g("Isi Realisasi Perkuliahan"),[z,S]=g("");class T extends f{render(){return a("div",{className:"intro-y"},a(k,{id:this.$router.params.id}),a("div",{className:"card shadow-sm mb-3"},a("div",{className:"card-header border-0"},a("div",{className:"row"},a("div",{className:"text-sm-end text-center"},a("div",{className:"dt-actions d-inline"}),d("create-lecturer-college-class-schedules")&&!this.collegeClass.feeder_id?a("div",{class:"btn-group"},a("button",{type:"button",class:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Tambah Jadwal Perkuliahan"),a("div",{class:"dropdown-menu"},a("router-link",{link:`/apps/lecturer/lecture/college-class/schedule/${this.$router.params.id}/class-schedule/create`,class:"dropdown-item",href:"#"},"Satu per Satu"),a("a",{class:"dropdown-item",href:"#",onClick:this.generateData},"Generate Data"))):""))),a("div",{className:"card-body"},a("div",{className:"table-responsive table-card mb-1"},a("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))),a(y,{onsubmit:this.submit,title:D}))}async componentWillMount(){const e=await p(`${r}/schedule/${this.$router.params.id}`,{hideSuccessNotification:!0});this.collegeClass=e.data.collegeClass}componentDidMount(){this.table=_("#dataTable",C(this.$router.params.id,this.deleteData,this.updateData,this.editRealization))}async editRealization(e){R("Isi Realisasi Perkuliahan"),N(),this.showLoading();const t=await p(`${r}/${this.$router.params.id}/class-schedules/${e}`,{hideSuccessNotification:!0}),{classSchedule:n}=t.data;this.hideLoading(),t.status==200&&(S(n.id),$('*[name="material_plan"]').val(n.material_plan),$('*[name="material_realization"]').val(n.material_realization)),$("#realization-modal").modal("show")}async submit(e){e.preventDefault();let t;t=await b(`${r}/${this.$router.params.id}/class-schedules/${z}/realization`,e.target),t.status==200&&(this.$router.reload(),this.table.ajax.reload)}async deleteData(e){const{isConfirmed:t}=await h.fire({title:"Hapus Jadwal Perkuliahan ?",text:"Data jadwal perkuliahan ini akan dihapus!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, lanjutkan",cancelButtonText:"Batal",confirmButtonColor:"#d1403b"});t&&(await del(`${r}/${this.$router.params.id}/class-schedules/${e}`)).status==200&&this.table.ajax.reload()}updateData(e){this.$router.pushState(`/apps/lecturer/lecture/college-class/schedule/${this.$router.params.id}/class-schedule/${e}/update`)}async generateData(e){e.preventDefault();const{isConfirmed:t}=await h.fire({title:"Generate Data ?",text:"Data hanya dapat di generate untuk kelas yang memiliki jadwal mingguan!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, lanjutkan",cancelButtonText:"Batal",confirmButtonColor:"#d1403b"});t&&(await b(`${r}/${this.$router.params.id}/class-schedules/generate-data`)).status==200&&this.table.ajax.reload()}}m(T,"defaultProps",{table:null,collegeClass:null});export{T as default};
