var N=Object.defineProperty;var v=(n,a,s)=>a in n?N(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s;var c=(n,a,s)=>(v(n,typeof a!="symbol"?a+"":a,s),s);import{A as k,a as u,C as g,c as e,g as d,r as x,h as w,p as h,S,d as D,u as y}from"./index.d57021e8.js";import{H as C}from"./header-component.8d40ee12.js";import{i as j}from"./datatable.4b22066f.js";import{B as T}from"./button.d257158a.js";/* empty css                 */import{m as R}from"./map-actions.609b7ae0.js";import"./jquery.4c77f39d.js";const P=(n,a,s,l)=>({url:`${k}/lecture/college-class/${n}/teaching-lecturers`,table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,id:"id",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender(t,r,i,o){return`
                    <div class="form-check">
                        <input class="form-check-input dt-checkbox" type="checkbox" value="${i.id}">
                    </div>`}},{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender(t,r,i,o){return o.row+o.settings._iDisplayStart+1}},{title:"NIDN",data:"employee.nidn",name:"employee.nidn"},{title:"Nama Dosen",data:"employee.name",name:"employee.name",mRender:function(t,r,i){return`${i.employee.front_title==null?"":i.employee.front_title+" "}
                            ${t||"-"}${i.employee.back_title==null?"":", "+i.employee.back_title}`}},{title:"SKS",data:"credit_total",name:"credit_total",mRender(t,r,i){return t||"-"}},{title:"Rencana Pert.",data:"meeting_plan",name:"meeting_plan "},{title:"Realisasi Pert.",data:"meeting_realization",name:"meeting_realization"},{title:"Jadwal",data:"schedule",name:"schedule"},{title:"Input Nilai",data:"is_score_entry",name:"is_score_entry",mRender(t,r,i){let o="";return o=`<div class="form-check form-switch form-switch-lg" dir="ltr">
                            <input type="checkbox" name="switch" class="form-check-input" id="${i.id}" data-id="${i.id}" ${t==!0?"checked":""}>
                            <label class="form-check-label" for="${i.id}"></label>
                        </div>`,o}},{title:"",data:"id",name:"id",searchable:!1,orderable:!1,sClass:"text-center nowrap",mRender:(t,r,i,o)=>{var m="";return i.college_class.feeder_id==null&&(u().includes("update-teaching-lecturers")&&(m+=`<button type="button" class="btn btn-outline-primary btn-sm mx-1" data-toggle="edit" data-id="${t}"><i class="bx bx-edit-alt"></i></button>`),u().includes("delete-teaching-lecturers")&&(m+=`<button type="button" class="btn btn-outline-danger btn-sm mx-1" data-toggle="delete" data-id="${t}"><i class="bx bx-trash"></i></button>`)),m}}],callback:()=>{$('button[data-toggle="edit"]').unbind().on("click",function(t){t.preventDefault(),a($(this).data("id"))}),$('button[data-toggle="delete"]').unbind().on("click",function(t){t.preventDefault(),s($(this).data("id"))}),$('input[name="switch"]').unbind().on("change",function(t){t.preventDefault(),l($(this).data("id"))})}});class _ extends g{render(){return e("div",{className:"modal fade",id:"teaching-lecturer-modal",role:"dialog"},e("div",{className:"modal-dialog",role:"document"},e("div",{className:"modal-content"},e("form",{onsubmit:this.props.onsubmit},e("div",{className:"modal-header bg-light pb-2"},e("h5",{className:"modal-title"},this.props.title)),e("div",{className:"modal-body"},e("div",{className:"mb-3"},e("label",{htmlFor:"lecturer",className:"from-label"},"Dosen  ",e("span",{className:"text-danger"},"*")),e("select",{name:"lecturer",id:"lecturer",className:"form-control js-choices"},e("option",{value:""},"Pilih Dosen"),this.props.employees.map(a=>e("option",{value:a.id},a.front_title==null?"":a.front_title," ",a.name,a.back_title==null?"":", "+a.back_title)))),e("div",{className:"mb-3"},e("label",{for:"credit"},"Bobot SKS ",e("span",{className:"text-danger"},"*")),e("input",{type:"text",name:"credit",className:"form-control",placeholder:"Bobot SKS",autocomplete:"off",id:"credit"})),e("div",{className:"row"},e("div",{className:"col-md-6"},e("div",{className:"mb-3"},e("label",{for:"meeting_plan"},"Rencana Pert. ",e("span",{className:"text-danger"},"*")),e("input",{type:"text",name:"meeting_plan",className:"form-control",placeholder:"Rencana Pert.",autocomplete:"off",id:"meeting_plan"}))),e("div",{className:"col-md-6"},e("div",{className:"mb-3"},e("label",{for:"meeting_realization"},"Realisasi Pert. ",e("span",{className:"text-danger"},"*")),e("input",{type:"text",name:"meeting_realization",className:"form-control",placeholder:"Realisasi Pert.",autocomplete:"off",id:"meeting_realization"})))),e("div",{className:"mb-3"},e("label",{htmlFor:"evaluation",className:"from-label"},"Jenis Evaluasi  ",e("span",{className:"text-danger"},"*")),e("select",{name:"evaluation",id:"evaluation",className:"form-control js-choices"},e("option",{value:""},"Pilih Jenis Evaluasi"),this.props.evaluations.map(a=>e("option",{value:a.id},a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:"weekly_schedule",className:"from-label"},"Jadwal Mengajar  ",e("span",{className:"text-danger"},"*")),e("select",{name:"weekly_schedule",id:"weekly_schedule",className:"form-control js-choices"},e("option",{value:""},"Pilih Jadwal Mengajar"),this.props.schedules.map(a=>e("option",{value:a.id},a.day.name," - ",a.time_start.split(":")[0]+":"+a.time_start.split(":")[1]," s/d ",a.time_end.split(":")[0]+":"+a.time_end.split(":")[1]," (",a.room.name,")"))))),e("div",{className:"modal-footer"},e("button",{type:"button",className:"btn btn-light","data-bs-dismiss":"modal"},"Batal"),e("button",{type:"submit",className:"btn btn-primary","data-form-loading":!0},e("i",{className:"bx bx-save"})," Simpan"))))))}}c(_,"defaultProps",{onsubmit:null,title:"Untitled Modal",data:null,evaluations:[],schedules:[],employees:[]});const[B,p]=y("Tambah Dosen Ajar"),[b,f]=y("");class z extends g{constructor(){super(...arguments);c(this,"base_url","lecture/college-class/"+this.$router.params.id+"/teaching-lecturers")}render(){return e("div",{className:"intro-y"},e(C,{id:this.$router.params.id}),e("div",{className:"card shadow-sm mb-3"},e("div",{className:"card-header border-0"},e("div",{className:"row"},e("div",{className:"text-sm-end text-center"},e("div",{className:"dt-actions d-inline"}),e(T,{data:{redirect:!1,onclick:this.createData,refresh:!0,create:this.collegeClass.feeder_id==null,permission:"create-teaching-lecturers",title:"Tambah Dosen Ajar"}}),this.collegeClass.feeder_id==null?e("button",{className:"btn btn-warning","data-form-calculate":!0,onClick:this.calculateCredit},e("i",{className:"bx bx-cog"})," Hitung SKS Dosen"):""))),e("div",{className:"card-body"},e("div",{className:"table-responsive table-card mb-1"},e("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))),e("div",{class:"alert alert-info",role:"alert"},e("h6",{className:"text-bg-dark"},e("u",null,"Keterangan")," "),e("p",null,"- Fasilitas hitung sks disediakan untuk membantu perhitungan sks dosen secara otomatis ",e("br",null),"- Rumus Perhitungan sks dosen = (Rencana Pertemuan : Jumlah Seluruh Rencana Pertemuan Dosen) x sks Mata Kuliah.")),e(_,{onsubmit:this.submit,title:B,evaluations:this.evaluationTypes,employees:this.employees,schedules:this.weeklySchedules}))}componentDidMount(){this.table=j("#dataTable",P(this.$router.params.id,this.editData,this.deleteData,this.updateScore))}async componentWillMount(){const{data:s}=await this.getData({model:["getEmployees","getEvaluationTypes"]}),l=await d(`lecture/college-class/schedule/${this.$router.params.id}`,{hideSuccessNotification:!0}),t=await this.getWeeklySchedules(`college_class_id=${this.$router.params.id}`);this.employees=s.getEmployees,this.evaluationTypes=s.getEvaluationTypes.original.evaluationTypes,this.weeklySchedules=t.data.weeklySchedules,this.collegeClass=l.data.collegeClass}createData(){p("Tambah Dosen Ajar"),f(""),x(),w(),$("#teaching-lecturer-modal").modal("show")}async calculateCredit(){var s=$("*[data-form-calculate]").html();$("*[data-form-calculate]").html("Loading...").attr("disabled",!0);const l=await d(`${this.base_url}/calculate-credit`,{hideSuccessNotification:!0});$("*[data-form-calculate]").html(s).removeAttr("disabled"),l.status==200&&this.table.ajax.reload()}async updateScore(s){this.showLoading();const l=await d(`${this.base_url}/${s}/score`,{hideSuccessNotification:!1});this.hideLoading(),l.status==200&&this.table.ajax.reload()}async editData(s){p("Edit Dosen Ajar"),this.showLoading();const l=await d(`${this.base_url}/${s}`,{hideSuccessNotification:!0}),{teachingLecturer:t}=l.data;this.hideLoading(),l.status==200&&(f(t.id),$('*[name="credit"]').val(t.credit_total),$('*[name="meeting_plan"]').val(t.meeting_plan),$('*[name="meeting_realization"]').val(t.meeting_realization),$('*[name="is_score"]').prop("checked",t.is_score_entry==!0),$(".js-choices")[0].choices.setChoiceByValue(t.employee_id),$(".js-choices")[1].choices.setChoiceByValue(t.evaluation_type_id.toString()),$(".js-choices")[2].choices.setChoiceByValue(t.weekly_schedule_id)),$("#teaching-lecturer-modal").modal("show")}async submit(s){s.preventDefault();let l;b==""?l=await h(`${this.base_url}`,s.target):l=await h(`${this.base_url}/${b}`,s.target),l.status==200&&(this.$router.reload(),this.table.ajax.reload())}async deleteData(s){S.fire({title:"Hapus ?",icon:"question",text:"Data yang dihapus tidak dikembalikan!",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Ya, lanjutkan",cancelButtonText:"Batal",confirmButtonColor:"#d1403b"}).then(async l=>{l.isConfirmed&&(await D(`${this.base_url}/${s}`)).status==200&&this.table.ajax.reload()})}}c(z,"defaultProps",{...R(["getData","getWeeklySchedules"]),table:null,employees:[],weeklySchedules:[],evaluationTypes:[],collegeClass:[]});export{z as default};
