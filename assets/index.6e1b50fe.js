var p=Object.defineProperty;var h=(s,e,t)=>e in s?p(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var o=(s,e,t)=>(h(s,typeof e!="symbol"?e+"":e,t),t);import{A as g,a as c,C as f,c as a,p as m,d as v,u as b}from"./index.d57021e8.js";import{B as y}from"./button.d257158a.js";import{i as N}from"./datatable.4b22066f.js";import{m as P}from"./map-actions.609b7ae0.js";import"./jquery.4c77f39d.js";const x=(s,e)=>({url:g+"/lecture/graduations",table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,id:"id",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender:(t,i,d,r)=>`
          <div class="form-check">
              <input class="form-check-input dt-checkbox" type="checkbox" value="${d.id}">
          </div>
        `},{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender:(t,i,d,r)=>r.row+r.settings._iDisplayStart+1},{title:"NIM",name:"student.nim",data:"student.nim"},{title:"Nama",name:"name",data:"name"},{title:"Prodi",searchable:!1,name:"studyProgram.name",data:"study_program.name",mRender(t,i,d){return`${d.study_program.education_level.code} - ${t}`}},{title:"Angkatan",name:"student.entryDate",data:"student.entry_date"},{title:"Status",searchable:!1,name:"studenStatus.name",data:"student_status.name"},{title:"Tanggal Lulus / DO",name:"graduation_date",data:"graduation_date",defaultContent:"-"},{title:"Periode Keluar",name:"academicPeriod.name",data:"academic_period.name",defaultContent:"-"},{title:"Keterangan",name:"description",data:"description",defaultContent:"-"},{title:"",data:"id",name:"id",searchable:!1,orderable:!1,sClass:"text-center nowrap",mRender:(t,i,d,r)=>{var l="";return c().includes("update-graduations")&&(l+=`<button type="button" class="btn btn-outline-primary btn-sm mx-1" data-toggle="edit" data-id="${t}"><i class="bx bx-edit-alt"></i></button>`),c().includes("delete-graduations")&&(l+=`<button type="button" class="btn btn-outline-danger btn-sm mx-1" data-toggle="delete" data-id="${t}"><i class="bx bx-trash"></i></button>`),l}}],callback:()=>{$('button[data-toggle="edit"]').unbind().on("click",function(t){t.preventDefault(),s($(this).data("id"))}),$('button[data-toggle="delete"]').unbind().on("click",function(t){t.preventDefault(),e($(this).data("id"))})}}),n="lecture/graduations",[j,w]=b("Tambah Jenis Mata Kuliah"),[u,_]=b("");class D extends f{render(){return a("div",{className:"intro-y"},a("div",{className:"row"},a("div",{className:"col-12"},a("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},a("h4",{className:"mb-sm-0"},this.meta.title),a("div",{className:"page-title-right"},a("ol",{className:"breadcrumb"},a("li",{className:"breadcrumb-item"},a("router-name",{name:"apps.dashboard"},"Dashboard")),a("li",{className:"breadcrumb-item"},"Data Pelengkap"),a("li",{className:"breadcrumb-item"},"Perkuliahan"),a("li",{className:"breadcrumb-item active"},this.meta.title)))))),a("div",{className:"card dt-filter-card"},a("div",{className:"card-body"},a("div",{className:"row"},a("div",{className:"col-3 mb-2"},a("label",{htmlFor:""},"Program Studi"),a("select",{name:"study_program_id",id:"study-program-id",className:"from-control js-choices dt-filter-input"},a("option",{value:""},"Pilih Prodi"),this.studyPrograms.map(e=>a("option",{value:e.id},e.education_level.code," - ",e.name)))),a("div",{className:"col-3 mb-2"},a("label",{htmlFor:""},"Status Keluar"),a("select",{name:"student_status_id",id:"student-status-id",className:"from-control js-choices dt-filter-input"},a("option",{value:""},"Pilih Status Mahasiswa"),this.studentStatuses.map(e=>a("option",{value:e.id},e.name)))),a("div",{className:"col-3 mb-2"},a("label",{htmlFor:""},"Angkatan"),a("select",{name:"entry_year",id:"entry-year",className:"from-control js-choices dt-filter-input"},a("option",{value:""},"Pilih Angkatan"),this.academicYears.map(e=>a("option",{value:e.id},e.name)))),a("div",{className:"col-3 mb-2"},a("label",{htmlFor:""},"Tahun Keluar"),a("select",{name:"academic_period_id",id:"academic-period-id",className:"from-control js-choices dt-filter-input"},a("option",{value:""},"Pilih Tahun Keluar"),this.academicPeriods.map(e=>a("option",{value:e.id},e.name))))))),a("div",{className:"card"},a("div",{className:"card-header border-0"},a("div",{className:"text-sm-end text-center"},a("div",{className:"dt-actions d-inline"}),a(y,{data:{redirect:!0,target:"apps.lecture.graduations.create-graduation",filter:!0,refresh:!0,permission:"create-graduations",title:"Tambah Kelulusan / DO"}}))),a("div",{className:"card-body"},a("div",{className:"table-responsive table-card mb-1"},a("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))))}componentDidMount(){this.table=N("#dataTable",x(this.editData,this.deleteData))}async componentWillMount(){const e=await this.getData({model:["studyPrograms","academicYears","academicPeriods"]});this.academicYears=e.data.academicYears,this.academicPeriods=e.data.academicPeriods,console.log(e);const t=await this.getData({model:["studentStatuses"],where:[{is_college:!1}]});this.studentStatuses=t.data.studentStatuses.filter(i=>i.id!="L"),this.studyPrograms=e.data.studyPrograms}createData(){w("Tambah Jenis Mata Kuliah"),$("form").trigger("reset"),$("#myModal").modal("show")}async editData(e){this.$router.pushName("apps.lecture.graduations.edit",{graduationId:e})}async submit(e){e.preventDefault();let t;u!=""?t=await m(`${n}/${u}`,e.target):t=await m(`${n}`,e.target),t.status==200&&(_(""),this.table.ajax.reload())}async deleteData(e){const{isConfirmed:t}=await this.showConfirm();t&&(await v(`${n}/${e}`)).status==200&&this.table.ajax.reload()}}o(D,"defaultProps",{table:null,...P(["getData"]),studyPrograms:[],studentStatuses:[],graduationStatuses:[],academicYears:[],academicPeriods:[]});export{D as default};
