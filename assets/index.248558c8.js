var g=Object.defineProperty;var _=(i,t,s)=>t in i?g(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var d=(i,t,s)=>(_(i,typeof t!="symbol"?t+"":t,s),s);import{C as v,c as e,F as b,g as P,u as l,B as f}from"./index.d57021e8.js";import{m as N}from"./map-actions.609b7ae0.js";const[y,S]=l(""),[x,C]=l(""),[n,w]=l(""),[G,F]=l(""),[Y,j]=l("");class k extends v{async componentWillMount(){const t={model:["academicYears","academicPeriods","studyPrograms","getClassGroups","registrationPath","studentStatuses"]},{status:s,data:a}=await this.getData(t);console.log(a),s==200&&(this.studyPrograms=a.studyPrograms,this.academicYears=a.academicYears,this.academicPeriods=a.academicPeriods,this.registrationPath=a.registrationPath,this.studentStatus=a.studentStatuses)}render(){var t,s;return e("div",{class:"intro-y"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{class:"mb-sm-0"},(t=this.meta.title)!=null?t:"Untitled Page"),e("div",{className:"page-title-right"},e("div",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-link",{link:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item"},"Laporan"),e("li",{className:"breadcrumb-item"},"Mahasiswa"),e("li",{className:"breadcrumb-item active"},(s=this.meta.title)!=null?s:"Untitled Page")))))),e("div",{className:"card col-5",style:{marginLeft:440}},e("form",{onSubmit:this.handleSubmit},e("div",{className:"card-body"},e("div",{className:"mb-3"},e("label",{htmlFor:""},"Program Studi",e("span",{className:"text-danger"},"*")),e("select",{name:"study_program_id",id:"study_program_id",className:"from-control js-choices dt-filter-input",onChange:a=>{S(a.target.value),this.fechtCourse()},required:!0},e("option",{value:""},"Pilih"),this.studyPrograms.map(a=>e("option",{value:a.id,selected:y==a.id},a.education_level.code," - ",a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Angakatan",e("span",{className:"text-danger"},"*")),e("select",{name:"academic_year_id",id:"academic_year_id",className:"from-control js-choices dt-filter-input",required:!0,onChange:a=>{w(a.target.value),this.fechtCourse()}},e("option",{value:""},"Pilih"),this.academicYears.map(a=>e("option",{value:a.id,selected:n==a.id},a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Grup Kelas ",e("span",{className:"text-danger"},"*")),e("select",{name:"class_group_id",id:"class_group_id",className:"from-control js-choices dt-filter-input",required:!0},e("option",{value:""},"Pilih"),this.classGroup.length>0&&e(b,null,e("option",{value:"all"},"Semua Kelas"),this.classGroup.map(a=>e("option",{value:a.hashid},a.name))))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Periode Akademik ",e("span",{className:"text-danger"},"*")),e("select",{name:"academic_period_id",id:"academic_period_id",className:"from-control js-choices dt-filter-input",required:!0,onChange:a=>{C(a.target.value)}},e("option",{value:""},"Pilih"),this.academicPeriods.map(a=>e("option",{value:a.id,selected:x==a.id},a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Jalur Pendaftaran",e("span",{className:"text-danger"},"*")),e("select",{name:"registration_path_id",id:"registration_path_id",className:"from-control js-choices dt-filter-input",required:!0,onChange:a=>{F(a.target.value)}},e("option",{value:""},"Pilih"),e("option",{value:"all"},"Semua Jenis Pendaftaran"),this.registrationPath.map(a=>e("option",{value:a.id,selected:G==a.id},a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Status Mahasiswa",e("span",{className:"text-danger"},"*")),e("select",{name:"student_status_id",id:"student_status_id",className:"from-control js-choices dt-filter-input",required:!0,onChange:a=>{j(a.target.value)}},e("option",{value:""},"Pilih"),e("option",{value:"all"},"Semua Status"),this.studentStatus.map(a=>{if(a.id!==1)return e("option",{value:a.id,selected:Y==a.id}," ",a.name,"  ")}))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Jumlah Mahasiswa",e("span",{className:"text-danger"},"*")),e("select",{name:"total_student",id:"total_student",className:"from-control js-choices dt-filter-input",required:!0},e("option",{value:""},"Pilih"),e("option",{value:"10"},"10"),e("option",{value:"20"},"20"),e("option",{value:"30"},"30"),e("option",{value:"50"},"50"),e("option",{value:"70"},"75"),e("option",{value:"80"},"80"),e("option",{value:"90"},"90")))),e("div",{className:"card-footer text-end"},e("button",{className:"btn btn-primary",type:"submit","data-form-loading":!0},"Cetak")))))}async fechtCourse(){let t=$('select[name="study_program_id"]').val();const s=this;if(t!="all"){const{data:a}=await P(`general/class-groups?study_program_id=${t}&academic_year_id=${n}`,{hideSuccessNotification:!0});this.setState(()=>{s.classGroup=a.classGroups})}t=="all"&&this.setState(()=>{s.classGroup=[]})}handleSubmit(t){t.preventDefault();let s=$('select[name="academic_period_id"]').val(),a=$('select[name="academic_year_id"]').val(),c=$('select[name="class_group_id"]').val(),m=$('select[name="registration_path_id"]').val(),u=$('select[name="student_status_id"]').val(),p=$('select[name="study_program_id"]').val(),h=$('select[name="total_student"]').val();const o=`${f}/api/v1/report/student/student-list/print?study_program_id=${p}&academic_year_id=${a}&class_grup_id=${c}&registration_path_id=${m}&academic_period_id=${s}&student_status_id=${u}&total_student=${h}`,r=window.open(`${o}`,"_blank","resizable=yes,scrollbars=yes,status=yes");r&&(r.opener=null,r.location=`${o}`,r.addEventListener("beforeunload",function(){r.location=`${o}`}))}}d(k,"defaultProps",{...N(["getStudyPrograms","getAcademicYears","getClassGroups","getData"]),table:null,studyPrograms:[],academicYears:[],academicPeriods:[],registrationPath:[],classGroup:[],studentStatus:[]});export{k as default};
