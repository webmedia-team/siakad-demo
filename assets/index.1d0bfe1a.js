var b=Object.defineProperty;var p=(c,e,t)=>e in c?b(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var d=(c,e,t)=>(p(c,typeof e!="symbol"?e+"":e,t),t);import{A as h,C as g,g as m,c as a}from"./index.d57021e8.js";import{i as f}from"./datatable.4b22066f.js";import"./jquery.4c77f39d.js";const N=c=>({url:h+"/lecturer/lecture/college-class/schedule",table:[{title:"No",data:"id",name:"id",searchable:!1,orderable:!1,width:"5%",mRender:(e,t,s,l)=>l.row+l.settings._iDisplayStart+1},{title:"Semester",data:"academic_period",name:"academic_period_id",mRender:e=>e.name},{title:"Mata Kuliah",data:"course",name:"course_id",mRender:e=>e.code+" - "+e.name},{title:"Program Studi",data:"study_program",name:"study_program_id",mRender:e=>{var t,s,l;return`${(s=(t=e==null?void 0:e.education_level)==null?void 0:t.code)!=null?s:""} - ${(l=e==null?void 0:e.name)!=null?l:""}`}},{title:"Nama Kelas",data:"name",name:"name"},{title:"Kapasitas",data:"capacity",name:"capacity"},{title:"Peserta",data:"participant_count",name:"participant_count"},{title:"Dinilai",data:"score_count",name:"score_count",mRender:function(e,t,s){return e+"/"+s.participant_count}},{title:"Nilai Dikunci",data:"is_lock_score",name:"is_lock_score",sClass:"text-center",mRender:e=>`<i class="bx bxs-${e==!0?"check":"minus"}-circle text-${e==!0?"success":"danger"} bx-bold"></i>`},{title:"",data:"id",name:"id",searchable:!1,orderable:!1,sClass:"text-center nowrap",mRender:(e,t,s,l)=>{var r="";return r+=`<button type="button" class="btn btn-outline-warning btn-sm mx-1" data-toggle="detail" data-id="${e}"><i class="mdi mdi-eye"></i></button>`,r}}],callback:()=>{$('button[data-toggle="detail"]').unbind().on("click",function(e){e.preventDefault(),c($(this).data("id"))})},options:{}}),u="lecturer/lecture/college-class/schedule";class _ extends g{async componentWillMount(){const{status:e,data:t}=await m(`${u}/get-courses`,{hideSuccessNotification:!0});e==200&&(this.courses=t.courses)}render(){var e;return a("div",{className:"intro-y"},a("div",{className:"row"},a("div",{className:"col-12"},a("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},a("h4",{className:"mb-sm-0"},this.meta.title),a("div",{className:"page-title-right"},a("ol",{className:"breadcrumb"},a("li",{className:"breadcrumb-item"},a("router-name",{name:"apps.dashboard"},"Dashboard")),a("li",{className:"breadcrumb-item active"},"Perkuliahan"),a("li",{className:"breadcrumb-item active"},this.meta.title)))))),a("div",{className:"card shadow-sm mb-3"},a("div",{className:"card-body"},a("div",{className:"row"},a("div",{className:"col-sm-6 col-12"},a("div",{className:"mb-3"},a("label",null,"Matakuliah"),a("select",{className:"form-control js-choices dt-filter-input",name:"course_id",onChange:()=>{this.fetchCollegeClasses(),this.filter()}},a("option",{value:"",key:""},"Pilih"),(e=this.courses)==null?void 0:e.map(t=>a("option",{value:t.id,key:""},t.code," - ",t.name))))),a("div",{className:"col-sm-6 col-12"},a("div",{className:"mb-3"},a("label",null,"Kelas Kuliah"),a("select",{className:"form-control js-choices dt-filter-input",name:"college_class_id",onChange:this.filter},a("option",{value:"",key:""},"Pilih"))))))),a("div",{className:"card"},a("div",{className:"card-header border-0"},a("div",{className:"text-sm-end text-center"},a("div",{className:"dt-actions d-inline"}))),a("div",{className:"card-body"},a("div",{className:"table-responsive table-card mb-1"},a("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))))}componentDidMount(){this.table=f("#dataTable",N(this.detailData))}async fetchCollegeClasses(){var t;let e=$('*[name="course_id"').val();if(e!=""&&e!=null){const{status:s,data:l}=await m(`${u}/get-college-classes?course_id=${e}`,{hideSuccessNotification:!0});if(s==200){$(".js-choices")[1].choices.clearChoices(),$(".js-choices")[1].choices.clearStore(),$(".js-choices")[1].choices.clearInput();let r=[];(t=l==null?void 0:l.collegeClasses)==null||t.forEach(i=>{var o,n;r.push({value:i.id,label:i.name+" | "+((n=(o=i==null?void 0:i.lecture_system)==null?void 0:o.name)!=null?n:"-")+" | Peserta "+i.class_participant_count+" Orang"})}),$(".js-choices")[1].choices.setChoices(r)}}}filter(){let e="";$(".dt-filter-input").each((t,s)=>{e+=`${$(s).attr("name")}=${$(s).val()}`,$(".dt-filter-input").length-1!=t&&(e+="&")}),Pace.restart(),this.table.ajax.url(`${h}/lecturer/lecture/college-class/schedule?${e}`).load()}async detailData(e){this.$router.pushName("apps.lecturer.lecture.college-class.schedule.class-detail",{id:e})}}d(_,"defaultProps",{table:null,courses:null,collegeClasses:null});export{_ as default};
