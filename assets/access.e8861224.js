var E=Object.defineProperty;var x=(c,n,d)=>n in c?E(c,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[n]=d;var g=(c,n,d)=>(x(c,typeof n!="symbol"?n+"":n,d),d);import{C as w,c as a,g as C,p as A}from"./index.d57021e8.js";import{m as k}from"./map-actions.609b7ae0.js";/*! multi.js 17-02-2021 */var N=function(){var c=function(e,t){var r=t.limit;if(r>-1){for(var o=0,s=0;s<e.options.length;s++)e.options[s].selected&&o++;if(o===r)for(this.disabled_limit=!0,typeof t.limit_reached=="function"&&t.limit_reached(),s=0;s<e.options.length;s++)(i=e.options[s]).selected||i.setAttribute("disabled",!0);else if(this.disabled_limit){for(s=0;s<e.options.length;s++){var i;(i=e.options[s]).getAttribute("data-origin-disabled")==="false"&&i.removeAttribute("disabled")}this.disabled_limit=!1}}},n=function(e,t,r){var o,s,i,u=e.options[t.target.getAttribute("multi-index")];u.disabled||(u.selected=!u.selected,c(e,r),o="change",s=e,(i=document.createEvent("HTMLEvents")).initEvent(o,!1,!0),s.dispatchEvent(i))},d=function(e,t){if(e.wrapper.selected.innerHTML="",e.wrapper.non_selected.innerHTML="",t.non_selected_header&&t.selected_header){var r=document.createElement("div"),o=document.createElement("div");r.className="header",o.className="header",r.innerText=t.non_selected_header,o.innerText=t.selected_header,e.wrapper.non_selected.appendChild(r),e.wrapper.selected.appendChild(o)}if(e.wrapper.search)var s=e.wrapper.search.value;for(var i=null,u=null,m=0;m<e.options.length;m++){var l=e.options[m],h=l.value,f=l.textContent||l.innerText,p=document.createElement("a");if(p.tabIndex=0,p.className="item",p.innerText=f,p.setAttribute("role","button"),p.setAttribute("data-value",h),p.setAttribute("multi-index",m),l.disabled&&(p.className+=" disabled"),l.selected){p.className+=" selected";var y=p.cloneNode(!0);e.wrapper.selected.appendChild(y)}if(l.parentNode.nodeName=="OPTGROUP"&&l.parentNode!=u){if(u=l.parentNode,(i=document.createElement("div")).className="item-group",l.parentNode.label){var b=document.createElement("span");b.innerHTML=l.parentNode.label,b.className="group-label",i.appendChild(b)}e.wrapper.non_selected.appendChild(i)}l.parentNode==e&&(i=null,u=null),(!s||s&&f.toLowerCase().indexOf(s.toLowerCase())>-1)&&(i!=null?i.appendChild(p):e.wrapper.non_selected.appendChild(p))}if(t.hide_empty_groups){var v=document.getElementsByClassName("item-group");for(m=0;m<v.length;m++)v[m].childElementCount<2&&(v[m].style.display="none")}};return function(e,t){if((t=t!==void 0?t:{}).enable_search=t.enable_search===void 0||t.enable_search,t.search_placeholder=t.search_placeholder!==void 0?t.search_placeholder:"Search...",t.non_selected_header=t.non_selected_header!==void 0?t.non_selected_header:null,t.selected_header=t.selected_header!==void 0?t.selected_header:null,t.limit=t.limit!==void 0?parseInt(t.limit):-1,isNaN(t.limit)&&(t.limit=-1),t.hide_empty_groups=t.hide_empty_groups!==void 0&&t.hide_empty_groups,e.dataset.multijs==null&&e.nodeName=="SELECT"&&e.multiple){e.style.display="none",e.setAttribute("data-multijs",!0);var r=document.createElement("div");if(r.className="multi-wrapper",t.enable_search){var o=document.createElement("input");o.className="search-input",o.type="text",o.setAttribute("placeholder",t.search_placeholder),o.setAttribute("title",t.search_placeholder),o.addEventListener("input",function(){d(e,t)}),r.appendChild(o),r.search=o}var s=document.createElement("div");s.className="non-selected-wrapper";var i=document.createElement("div");i.className="selected-wrapper",r.addEventListener("click",function(l){l.target.getAttribute("multi-index")&&n(e,l,t)}),r.addEventListener("keypress",function(l){var h=l.keyCode===32||l.keyCode===13;l.target.getAttribute("multi-index")&&h&&(l.preventDefault(),n(e,l,t))}),r.appendChild(s),r.appendChild(i),r.non_selected=s,r.selected=i,e.wrapper=r,e.parentNode.insertBefore(r,e.nextSibling);for(var u=0;u<e.options.length;u++){var m=e.options[u];m.setAttribute("data-origin-disabled",m.disabled)}c(e,t),d(e,t),e.addEventListener("change",function(){d(e,t)})}}}();typeof jQuery<"u"&&function(c){c.fn.multi=function(n){return n=n!==void 0?n:{},this.each(function(){var d=c(this);N(d.get(0),n)})}}(jQuery);const L=N,_="users";class T extends w{render(){var n,d;return a("div",{className:"intro-y"},a("div",{className:"container"},a("div",{className:"row"},a("div",{className:"col-12"},a("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},a("h4",{className:"mb-sm-0"},this.meta.title),a("div",{className:"page-title-right"},a("div",{className:"page-title-right"},a("ol",{className:"breadcrumb"},a("li",{className:"breadcrumb-item"},a("router-name",{name:"apps.dashboard"},"Dashboard")),a("li",{className:"breadcrumb-item"},"Manajemen User"),a("li",{className:"breadcrumb-item"},a("router-name",{name:"apps.users"},"User")),a("li",{className:"breadcrumb-item active title"},(d=(n=this.meta)==null?void 0:n.title)!=null?d:"Untitled Page"))))))),a("div",{className:"row"},a("div",{className:"card mb-3 col-sm-12"},a("form",{onsubmit:this.submit},a("div",{className:"card-body"},a("select",{multiple:"multiple",name:"study_program[]",id:"multiselect-optiongroup"},this.studyPrograms.map(e=>a("option",{value:e.id,selected:e.isSelect},e.studyProgram)))),a("div",{className:"card-footer text-end"},a("router-name",{className:"btn btn-dark mx-1",name:"apps.users"},"Kembali"),a("button",{className:"btn btn-primary",type:"submit","data-form-loading":!0},a("i",{className:"bx bx-save"})," Simpan"))))),a("div",{className:"row"},a("div",{class:"alert alert-info",role:"alert"},a("h6",{className:"text-bg-dark"},a("u",null,"Keterangan")," "),a("p",null,"- Fitur ini digunakan untuk memberikan akses data ke setiap user. ",a("br",null),"- Akses data ini hanya bisa diberikan untuk role group Prodi atau Jurusan.")))))}async componentWillMount(){const{data:n}=await C(`${_}/${this.$router.params.id}/access`,{hideSuccessNotification:!0});this.studyPrograms=n.data}componentDidMount(){var n=document.getElementById("multiselect-optiongroup");L(n,{enable_search:!0,search_placeholder:"Search...",non_selected_header:null,selected_header:null,limit:-1,limit_reached:function(){},hide_empty_groups:!0})}async submit(n){n.preventDefault();let d;this.$router.params.id&&(d=await A(`${_}/${this.$router.params.id}/access`,n.target)),d.status==200&&this.$router.pushName("apps.users",{})}}g(T,"defaultProps",{...k(["getData"]),studyPrograms:[]});export{T as default};
