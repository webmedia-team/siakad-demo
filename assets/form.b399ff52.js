var j=Object.defineProperty;var P=(l,a,t)=>a in l?j(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;var C=(l,a,t)=>(P(l,typeof a!="symbol"?a+"":a,t),t);import{C as w,c as e,i as x,g as S,p as _,u as o}from"./index.d57021e8.js";import{m as D}from"./map-actions.609b7ae0.js";const m="master/rooms",[i,r]=o(""),[c,n]=o(""),[K,d]=o(""),[T,u]=o(""),[k,p]=o(""),[F,h]=o(""),[N,b]=o(""),[U,v]=o(""),[M,f]=o("");class A extends w{render(){var a,t,g,y;return e("div",{className:"intro-y"},e("div",{className:"container"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{className:"mb-sm-0 title"},(t=(a=this.meta)==null?void 0:a.title)!=null?t:"Untitled Page"),e("div",{className:"page-title-right"},e("ol",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-name",{name:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item"},"Data Pelengkap"),e("li",{className:"breadcrumb-item"},"Perguruan Tinggi"),e("li",{className:"breadcrumb-item"},e("router-name",{name:"apps.master.rooms"},"Ruang Kuliah")),e("li",{className:"breadcrumb-item active title"},(y=(g=this.meta)==null?void 0:g.title)!=null?y:"Untitled Page")))))),e("div",{className:"card intro-y"},e("div",{className:"card-body"},e("form",{onsubmit:this.submit},e("div",{className:"mb-3"},e("div",{className:"row"},e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{for:"unit_type",className:"form-label"},"Tipe Unit"),e("select",{name:"unit_type",id:"unit_type",className:"form-control js-choices",onChange:s=>{r(s.target.value),this.changeUnitType()}},e("option",{value:""},"Pilih Tipe Unit"),e("option",{value:"major",selected:i=="major"},"Jurusan"),e("option",{value:"study_program",selected:i=="study_program"},"Program Studi"))),e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{htmlFor:"unit",className:"form-label"},"Unit (Jurusan / Prodi)"),e("select",{name:"unit",id:"unit",className:"form-control js-choices",onChange:s=>n(s.target.value)})))),e("div",{className:"mb-3"},e("div",{className:"row"},e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{htmlFor:"code",className:"form-label"},"Kode ",e("i",{className:"text-danger"},"*")),e("input",{type:"text",className:"form-control",name:"code",placeholder:"Kode",autoComplete:"off",onKeyUp:s=>d(s.target.value),value:K})),e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{htmlFor:"name",className:"form-label"},"Nama ",e("i",{className:"text-danger"},"*")),e("input",{type:"text",className:"form-control",name:"name",placeholder:"Nama",autoComplete:"off",onKeyUp:s=>u(s.target.value),value:T})))),e("div",{className:"mb-3"},e("div",{className:"row"},e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{htmlFor:"location",className:"form-label"},"Lokasi ",e("i",{className:"text-danger"},"*")),e("input",{type:"text",className:"form-control",name:"location",autoComplete:"off",placeholder:"Lokasi",onKeyUp:s=>p(s.target.value),value:k})),e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{htmlFor:"capacity",className:"form-label"},"Kapasitas ",e("i",{className:"text-danger"},"*")),e("input",{type:"number",name:"capacity",id:"capacity",autoComplete:"off",className:"form-control",onKeyUp:s=>h(s.target.value),placeholder:"Kapasitas",value:F})))),e("div",{className:"mb-3"},e("div",{className:"row"},e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{htmlFor:"type",className:"form-label"},"Tipe ",e("i",{className:"text-danger"},"*")),e("select",{name:"type",id:"type",className:"form-control js-choices",onChange:s=>b(s.target.value)},e("option",{value:""},"Pilih Tipe"),e("option",{value:"class",selected:N=="class"},"Kelas"),e("option",{value:"lab",selected:N=="lab"},"Lab"),e("option",{value:"other",selected:N=="other"},"Lainnya"))),e("div",{className:"col-md-6 col-sm-6 col-12"},e("label",{htmlFor:"is_active",className:"form-label"},"Status ",e("i",{className:"text-danger"},"*")),e("select",{name:"is_active",id:"isActive",className:"form-control js-choices",onChange:s=>v(s.target.value)},e("option",{value:""},"Pilih Status"),e("option",{value:"true",selected:U=="true"},"Aktif"),e("option",{value:"false",selected:U=="false"},"Tidak Aktif"))))),e("div",{className:"mb-3"},e("div",{className:"row"},e("div",{className:"col-md-12 col-sm-12 col-12"},e("label",{htmlFor:"description",className:"form-label"},"Deskripsi "),e("textarea",{name:"description",id:"description",cols:"30",rows:"3",className:"form-control",autoComplete:"off",placeholder:"Deskripsi",onKeyUp:s=>f(s.target.value)},M)))),e("div",{className:"card-footer text-end"},e("router-name",{className:"btn btn-dark mx-1",name:"apps.master.rooms"},"Kembali"),x("create-rooms")&&x("update-rooms")?e("button",{className:"btn btn-primary",type:"submit","data-form-loading":!0},e("i",{className:"bx bx-save"})," Simpan"):""))))))}componentDidMount(){this.choices=$(".js-choices"),this.fetchDataUnit()}componentWillMount(){r(""),n(""),d(""),u(""),p(""),h(""),b(""),v(""),f(""),this.$router.params.id&&this.getData()}async getData(){const{data:a}=await S(`${m}/${this.$router.params.id}`,{hideSuccessNotification:!0});this.setState(()=>{console.log(a.room.unitable_type),r(a.room.unitable_type=="App\\Models\\Major"?"major":a.room.unitable_type=="App\\Models\\StudyProgram"?"study_program":""),n(a.room.unitable_id),d(a.room.code),u(a.room.name),p(a.room.location),h(a.room.capacity),b(a.room.type),v(a.room.is_active.toString()),f(a.room.description)})}async submit(a){a.preventDefault();let t;this.$router.params.id?t=await _(`${m}/${this.$router.params.id}`,a.target):t=await _(m,a.target),t.status==200&&this.$router.pushState("/apps/master/rooms")}changeUnitType(){this.fetchDataUnit()}async fetchDataUnit(){let a;i=="major"?(a=await this.getMajors("is_active=true"),this.clearChoices(),a.status==200&&a.data.majors.length>0&&a.data.majors.forEach(t=>{this.choices[1].choices.setChoices([{value:t.id,label:t.name,selected:c!=null&&c==t.id}])})):i=="study_program"?(a=await this.getStudyPrograms(),this.clearChoices(),a.status==200&&a.data.studyPrograms.length>0&&a.data.studyPrograms.forEach(t=>{this.choices[1].choices.setChoices([{value:t.id,label:t.education_level!=null?t.education_level.code+" - "+t.name:t.name,selected:c!=null&&c==t.id}])})):this.clearChoices()}clearChoices(){this.choices[1].choices!=null&&(this.choices[1].choices.clearChoices(),this.choices[1].choices.clearStore(),this.choices[1].choices.clearInput())}}C(A,"defaultProps",{...D(["getMajors","getStudyPrograms"]),choices:null});export{A as default};
