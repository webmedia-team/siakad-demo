var p=Object.defineProperty;var g=(i,s,t)=>s in i?p(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var o=(i,s,t)=>(g(i,typeof s!="symbol"?s+"":s,t),t);import{C as h,c as e,g as b,u as d,B as y}from"./index.d57021e8.js";import{m as _}from"./map-actions.609b7ae0.js";const[f,v]=d(""),[l,N]=d(""),[m,P]=d("");class G extends h{async componentWillMount(){const s={model:["getEmployees","academicPeriods","studyPrograms","getClassGroups","academicYears"]},{status:t,data:a}=await this.getData(s);t==200&&(this.employees=a.getEmployees,this.studyPrograms=a.studyPrograms,this.academicPeriods=a.academicPeriods,this.academicYears=a.academicYears)}render(){var s,t;return e("div",{class:"intro-y"},e("div",{className:"row"},e("div",{className:"col-12"},e("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},e("h4",{class:"mb-sm-0"},(s=this.meta.title)!=null?s:"Untitled Page"),e("div",{className:"page-title-right"},e("div",{className:"breadcrumb"},e("li",{className:"breadcrumb-item"},e("router-link",{link:"apps.dashboard"},"Dashboard")),e("li",{className:"breadcrumb-item"},"Laporan"),e("li",{className:"breadcrumb-item"},"Perkuliahan"),e("li",{className:"breadcrumb-item active"},(t=this.meta.title)!=null?t:"Untitled Page")))))),e("div",{className:"card col-5",style:{marginLeft:440}},e("form",{onSubmit:this.handleSubmit},e("div",{className:"card-body "},e("div",{className:"mb-3"},e("label",{htmlFor:""},"Program Studi ",e("span",{className:"text-danger"},"*")),e("select",{name:"study_program_id",id:"study_program",className:"from-control js-choices dt-filter-input",onChange:a=>{P(a.target.value)},required:!0},e("option",{value:""},"Pilih"),this.studyPrograms.map(a=>e("option",{value:a.id,selected:a.id==m},a.education_level.code," - ",a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Angkatan ",e("span",{className:"text-danger"},"*")),e("select",{name:"academic_year_id",id:"academic_year",className:"from-control js-choices dt-filter-input",onChange:a=>{N(a.target.value),this.fetchClassGroup()},required:!0},e("option",{value:""},"Pilih"),this.academicYears.map(a=>e("option",{value:a.id,selected:a.id==l},a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Grup Kelas ",e("span",{className:"text-danger"},"*")),e("select",{name:"class_grup_id",id:"class_grup_id",className:"from-control js-choices dt-filter-input",onChange:a=>{v(a.target.value)},required:!0},e("option",{value:""},"Pilih"),this.classGroup.map(a=>e("option",{value:a.hashid,selected:a.hashid==f},a.name)))),e("div",{className:"mb-3"},e("label",{htmlFor:""},"Periode Akademik ",e("span",{className:"text-danger"},"*")),e("select",{name:"academic_period_id",id:"academic_period_id",className:"from-control js-choices dt-filter-input",required:!0},e("option",{value:""},"Pilih"),this.academicPeriods.map(a=>e("option",{value:a.id},a.name))))),e("div",{className:"card-footer text-end"},e("button",{className:"btn btn-primary",type:"submit","data-form-loading":!0},"Cetak")))))}handleSubmit(s){s.preventDefault();let t=$('select[name="academic_period_id"]').val(),a=$('select[name="study_program_id"]').val(),n=$('select[name="academic_year_id"]').val(),u=$('select[name="class_grup_id"]').val();const c=`${y}/api/v1/report/attendance-presentage/presentase/print?academic_period_id=${t}&academic_year_id=${n}&study_program_id=${a}&class_group_id=${u}`,r=window.open(`${c}`,"_blank","resizable=yes,scrollbars=yes,status=yes");r&&(r.opener=null,r.location=`${c}`,r.addEventListener("beforeunload",function(){r.location=`${c}`}))}async fetchClassGroup(){const s=await b(`report/report-khs/get-class-group/${l}/${m}`),t=this;this.setState(()=>{t.classGroup=s.data.classGroups})}}o(G,"defaultProps",{..._(["getStudyPrograms","getEmployees","getData","getAcademicYears","getClassGroups"]),table:null,studyPrograms:[],academicPeriods:[],employees:[],academicYears:[],classGroup:[]});export{G as default};
