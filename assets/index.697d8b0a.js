var _=Object.defineProperty;var x=(d,e,t)=>e in d?_(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var c=(d,e,t)=>(x(d,typeof e!="symbol"?e+"":e,t),t);import{A as y,a as h,C as v,c as a,r as w,h as A,g as u,S as f,p,d as T,u as N}from"./index.d57021e8.js";import{m as S}from"./map-actions.609b7ae0.js";import{i as P}from"./datatable.4b22066f.js";import{B as j}from"./button.d257158a.js";/* empty css                 */import"./jquery.4c77f39d.js";const B=(d,e,t,s)=>({url:y+"/setting/semesters",table:[{title:'<div class="form-check"><input class="form-check-input" type="checkbox" id="dt-checkbox" /></div>',data:null,name:"id",searchable:!1,orderable:!1,width:"5%",sClass:"text-center",mRender:(i,o,l,m)=>`
                    <div class="form-check">
                        <input class="form-check-input dt-checkbox" type="checkbox" value="${l.hashid}">
                    </div>`},{title:"No",data:null,name:null,searchable:!1,orderable:!1,width:"5%",mRender:(i,o,l,m)=>m.row+m.settings._iDisplayStart+1},{title:"Kode",data:"id",name:"id"},{title:"Nama Periode",data:"name",name:"name"},{title:"Periode Kuliah",data:"college_date",name:"college_date"},{title:"Periode UTS",data:"mid_exam_date",name:"mid_exam_date"},{title:"Periode UAS",data:"final_exam_date",name:"final_exam_date"},{title:"Heregistrasi",data:"heregistration_date",name:"heregistration_date"},{title:"Status",data:"is_active",name:"is_active",mRender:(i,o,l,m)=>{let n="";return l.is_use==!1&&(n=`<div class="form-check form-switch form-switch-lg" dir="ltr">
                                <input type="checkbox" name="switch" class="form-check-input" id="${l.hashid}" data-id="${l.hashid}" ${i==!0?"checked":""}>
                                <label class="form-check-label" for="${l.hashid}"></label>
                            </div>`),n}},{title:"Set Aktif",data:"is_use",name:"is_use",mRender:(i,o,l,m)=>{let n="";return l.is_active==!0&&(n=`<div class="form-check form-switch form-switch-lg" dir="ltr">
                                <input type="checkbox" name="switch_active" class="form-check-input" id="${l.hashid}" data-id="${l.hashid}" ${i==!0?"checked":""}>
                                <label class="form-check-label" for="${l.hashid}"></label>
                            </div>`),n}},{title:"",data:"hashid",name:"hashid",searchable:!1,orderable:!1,sClass:"text-center nowrap",mRender:(i,o,l,m)=>{var n="";return h().includes("update-semesters")&&(n+=`<button type="button" class="btn btn-outline-primary btn-sm mx-1" data-toggle="edit" data-id="${i}"><i class="bx bx-edit-alt"></i></button>`),h().includes("delete-semesters")&&(n+=`<button type="button" class="btn btn-outline-danger btn-sm mx-1" data-toggle="delete" data-id="${i}"><i class="bx bx-trash"></i></button>`),n}}],callback:()=>{$('button[data-toggle="edit"]').unbind().on("click",function(i){i.preventDefault(),d($(this).data("id"))}),$('button[data-toggle="delete"]').unbind().on("click",function(i){i.preventDefault(),e($(this).data("id"))}),$('input[name="switch"]').unbind().on("change",function(i){i.preventDefault(),t($(this).data("id"))}),$('input[name="switch_active"]').unbind().on("change",function(i){i.preventDefault(),s($(this).data("id"))})},options:{order:[2,"desc"]}});class k extends v{render(){return a("div",{className:"modal fade",id:"semester-modal",role:"dialog"},a("div",{className:"modal-dialog modal-lg",role:"document"},a("div",{className:"modal-content"},a("form",{onsubmit:this.props.onsubmit},a("div",{className:"modal-header bg-light pb-2"},a("h5",{className:"modal-title"},this.props.title)),a("div",{className:"modal-body"},a("div",{className:"row"},a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"code"},"Kode ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"code",className:"form-control",placeholder:"20211",autocomplete:"off",id:"code"}),a("small",null,"5 digit kode kombinasi tahun dan semester. Ex. 20211 (1 = Ganjil, 2 = Genap, 3 = Pendek)"))),a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"academic-year"},"Tahun Ajar ",a("span",{className:"text-danger"},"*")),a("select",{name:"academic_year",id:"academic-year",className:"form-control js-choices"},a("option",{value:""},"Pilih Tahun Ajar"),this.props.academicYears.map(e=>a("option",{value:e.id},e.name)))))),a("div",{className:"row"},a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"semester"},"Semester ",a("span",{className:"text-danger"},"*")),a("select",{name:"semester",id:"semester",className:"form-control js-choices"},a("option",{value:""},"Pilih Semester"),a("option",{value:"1"},"Ganjil"),a("option",{value:"2"},"Genap"),a("option",{value:"3"},"Pendek")))),a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"name"},"Nama Periode Akademik ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"name",className:"form-control",placeholder:"Nama Periode Akademik",autocomplete:"off",id:"name"})))),a("div",{className:"row"},a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"college-start-date"},"Tanggal Awal Kuliah ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"college_start_date",className:"form-control flatpickr-date",placeholder:"Tanggal Awal Kuliah",autocomplete:"off",id:"college-start-date"}))),a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"college-end-date"},"Tanggal Akhir Kuliah ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"college_end_date",className:"form-control flatpickr-date",placeholder:"Tanggal Akhir Kuliah",autocomplete:"off",id:"college-end-date"})))),a("div",{className:"row"},a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"mid-exam-start-date"},"Tanggal Awal UTS ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"mid_exam_start_date",className:"form-control flatpickr-date",placeholder:"Tanggal Awal UTS",autocomplete:"off",id:"mid-exam-start-date"}))),a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"mid-exam-end-date"},"Tanggal Akhir UTS ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"mid_exam_end_date",className:"form-control flatpickr-date",placeholder:"Tanggal Akhir UTS",autocomplete:"off",id:"mid-exam-end-date"})))),a("div",{className:"row"},a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"final-exam-start-date"},"Tanggal Awal UAS ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"final_exam_start_date",className:"form-control flatpickr-date",placeholder:"Tanggal Awal UAS",autocomplete:"off",id:"final-exam-start-date"}))),a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"final-exam-end-date"},"Tanggal Akhir UAS ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"final_exam_end_date",className:"form-control flatpickr-date",placeholder:"Tanggal Akhir UAS",autocomplete:"off",id:"final-exam-end-date"})))),a("div",{className:"row"},a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"heregistration-start-date"},"Tanggal Awal Heregistrasi ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"heregistration_start_date",className:"form-control flatpickr-date",placeholder:"Tanggal Awal Heregistrasi",autocomplete:"off",id:"heregistration-start-date"}))),a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"heregistration-end-date"},"Tanggal Akhir Heregistrasi ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"heregistration_end_date",className:"form-control flatpickr-date",placeholder:"Tanggal Akhir Heregistrasi",autocomplete:"off",id:"heregistration-end-date"})))),a("div",{className:"row"},a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:"number-of-meeting"},"Jumlah Pertemuan ",a("span",{className:"text-danger"},"*")),a("input",{type:"text",name:"number_of_meeting",className:"form-control",placeholder:"Jumlah Pertemuan",autocomplete:"off",id:"number-of-meeting"}))),a("div",{className:"col-md-6"},a("div",{className:"mb-3"},a("label",{for:""},"Aktif"),a("div",{class:"form-check form-switch form-switch-lg",dir:"ltr"},a("input",{type:"checkbox",name:"status",class:"form-check-input",id:"customSwitchsizelg",checked:""}),a("label",{class:"form-check-label",for:"customSwitchsizelg"})))))),a("div",{className:"modal-footer"},a("button",{type:"button",className:"btn btn-light","data-bs-dismiss":"modal"},"Batal"),a("button",{type:"submit",className:"btn btn-primary","data-form-loading":!0},a("i",{className:"bx bx-save"})," Simpan"))))))}}c(k,"defaultProps",{onsubmit:null,title:"Untitled Modal",data:null,academicYears:[]});const[D,b]=N("Tambah Periode Akademik"),[g,C]=N(""),r="setting/semesters";class U extends v{render(){var e,t;return a("div",{className:"intro-y"},a("div",{className:"row"},a("div",{className:"col-12"},a("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between"},a("h4",{className:"mb-sm-0"},(e=this.meta.title)!=null?e:"Untitled Page"),a("div",{className:"page-title-right"},a("ol",{className:"breadcrumb"},a("li",{className:"breadcrumb-item"},a("router-name",{name:"apps.dashboard"},"Dashboard")),a("li",{className:"breadcrumb-item"},"Pengaturan"),a("li",{className:"breadcrumb-item active"},(t=this.meta.title)!=null?t:"Untitled Page")))))),a("div",{className:"card"},a("div",{className:"card-header border-0"},a("div",{className:"text-sm-end text-center"},a("div",{className:"dt-actions d-inline"}),a(j,{data:{redirect:!1,onclick:this.createData,refresh:!0,filter:!1,permission:"create-semesters",title:"Tambah Periode Akademik"}}))),a("div",{className:"card-body"},a("div",{className:"table-responsive table-card mb-1"},a("table",{className:"table zero-configuration",width:"100%",id:"dataTable"})))),a("div",{className:""},a("div",{class:"alert alert-info",role:"alert"},a("h6",{className:"text-bg-dark"},a("u",null,"Keterangan")," "),a("p",null,"- Semester yang berstatus aktif merupakan semester yang masih dimungkinkan untuk dilakukan perubahan data. ",a("br",null),"- Semester yang di set aktif merupakan semester yang digunakan saat ini atau semester berjalan. ",a("br",null),"- Setelah melakukan set aktif semester maka diwajibkan untuk ",a("strong",null," ",a("router-name",{name:""},"Set Status Semester Mahasiswa")),". ",a("br",null),"- Heregistrasi akan otomatis terbuka ketika semester diaktifkan dan sesuai dengan periode heregistrasi yang telah ditentukan."))),a(k,{academicYears:this.academicYears,onsubmit:this.submit,title:D}))}componentDidMount(){this.table=P("#dataTable",B(this.editData,this.deleteData,this.updateStatus,this.setActive))}async componentWillMount(){const e=await this.getAcademicYears();this.academicYears=e.data.academicYears}createData(){b("Tambah Periode Akademik"),w(),A(),$("#semester-modal").modal("show")}async editData(e){b("Edit Periode Akademik"),this.showLoading();const t=await u(`${r}/${e}`,{hideSuccessNotification:!0}),{academicPeriod:s}=t.data;this.hideLoading(),t.status==200&&(C(s.hashid),$('*[name="name"]').val(s.name),$('*[name="code"]').val(s.id),$('*[name="college_start_date"]').val(s.college_start_date),$('*[name="college_end_date"]').val(s.college_end_date),$('*[name="mid_exam_start_date"]').val(s.mid_exam_start_date),$('*[name="mid_exam_end_date"]').val(s.mid_exam_end_date),$('*[name="final_exam_start_date"]').val(s.final_exam_start_date),$('*[name="final_exam_end_date"]').val(s.final_exam_end_date),$('*[name="heregistration_start_date"]').val(s.heregistration_start_date),$('*[name="heregistration_end_date"]').val(s.heregistration_end_date),$('*[name="number_of_meeting"]').val(s.number_of_meeting),$('*[name="status"]').prop("checked",s.is_active==!0),$(".js-choices")[1].choices.setChoiceByValue(s.semester),$(".js-choices")[0].choices.setChoiceByValue(s.academic_year_id.toString())),$("#semester-modal").modal("show")}async updateStatus(e){this.showLoading();const t=await u(`${r}/${e}/status`,{hideSuccessNotification:!1});this.hideLoading(),t.status==200&&this.table.ajax.reload()}async setActive(e){f.fire({title:"Warning!",icon:"warning",text:"Tindakan ini akan mempengaruhi proses akademik",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Ya, lanjutkan",cancelButtonText:"Batal",confirmButtonColor:"#6691e7"}).then(async t=>{if(t.isConfirmed){this.showLoading();const s=await u(`${r}/${e}/set-active`,{hideSuccessNotification:!1});this.hideLoading(),s.status==200&&this.table.ajax.reload()}})}async submit(e){e.preventDefault();let t;g==""?t=await p(`${r}`,e.target):t=await p(`${r}/${g}`,e.target),t.status==200&&(this.$router.reload(),this.table.ajax.reload)}async deleteData(e){f.fire({title:"Hapus ?",icon:"question",text:"Data yang dihapus tidak dikembalikan!",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Ya, lanjutkan",cancelButtonText:"Batal",confirmButtonColor:"#d1403b"}).then(async t=>{t.isConfirmed&&(await T(`${r}/${e}`)).status==200&&this.table.ajax.reload()})}}c(U,"defaultProps",{...S(["getAcademicYears"]),table:null,academicYears:[]});export{U as default};
